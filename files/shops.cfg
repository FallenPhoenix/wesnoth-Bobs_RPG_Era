{~add-ons/Bobs_RPG_Era/files/misc_macros.cfg}

####################################################################################
# Setting Prices
####################################################################################

#define BOB_DEFINE_GLOBAL_PRICES

# Traps
{VARIABLE global_price.bomb 3}
{VARIABLE global_price.poison 4}
{VARIABLE global_price.net 5}
# Potions
{VARIABLE global_price.health_potion 3}
{VARIABLE global_price.endurance_potion 6}
{VARIABLE global_price.stamina_potion 12}
{VARIABLE global_price.life_potion 10}
{VARIABLE global_price.brainhaste_tonic 9}
{VARIABLE global_price.mind_juice 15}
{VARIABLE global_price.antidote 7}
{VARIABLE global_price.speed_serum 8}
{VARIABLE global_price.energy_cocktail 11}
{VARIABLE global_price.bloodlust_bile 14}
{VARIABLE global_price.frenzy_fluid 13}
# Raw Materials
{VARIABLE global_price.huanti_leaves 1}
{VARIABLE global_price.slime 2}
{VARIABLE global_price.ulox_rock 3}
{VARIABLE global_price.scorpion_tail 4}
{VARIABLE global_price.yoll_tree_bark 5}
{VARIABLE global_price.gold_nugget 6}
{VARIABLE global_price.fang 4}
{VARIABLE global_price.clay 2}
{VARIABLE global_price.lizard_tail 4}
{VARIABLE global_price.dragon_tail 20}
# Misc Items
{VARIABLE global_price.walking_boots 14}
{VARIABLE global_price.elven_boots 27}
{VARIABLE global_price.nim_boots 30}
{VARIABLE global_price.snow_shoes 12}
{VARIABLE global_price.map 5}
{VARIABLE global_price.tent 8}
{VARIABLE global_price.magic_bean 4}
{VARIABLE global_price.suicide_bomb 13}
{VARIABLE global_price.tongue_of_mockery 18}
{VARIABLE global_price.unlit_lantern 17}
# Jewellery
{VARIABLE global_price.ring_of_swiftness 16}
{VARIABLE global_price.fire_ring 20}
{VARIABLE global_price.sky_ring 20}
{VARIABLE global_price.water_ring 20}
{VARIABLE global_price.earth_ring 20}
{VARIABLE global_price.gold_ring 5}
# Weapons: Grade A (46-50g)
{VARIABLE global_price.ice_rod 50}
{VARIABLE global_price.enchanted_spear 49}
{VARIABLE global_price.lance 49}
{VARIABLE global_price.slayer 48}
{VARIABLE global_price.thunder_axe 48}
{VARIABLE global_price.smasher 48}
{VARIABLE global_price.nipper 46}
# Weapons: Grade B (41-45g)
{VARIABLE global_price.salamander_blade 45}
{VARIABLE global_price.plague_staff 45}
{VARIABLE global_price.storm_bow 43}
{VARIABLE global_price.heavy_crossbow 42}
# Weapons: Grade C (36-40g)
{VARIABLE global_price.tomahawk 40}
{VARIABLE global_price.battle_axe 38}
{VARIABLE global_price.barbed_spear 38}
{VARIABLE global_price.frost_bow 36}
# Weapons: Grade D (31-35g)
{VARIABLE global_price.feathered_javelin 35}
{VARIABLE global_price.customised_sling 34}
{VARIABLE global_price.fire_bow 32}
{VARIABLE global_price.holy_sword 31}



#enddef

#define BOB_DEFINE_LOCAL_PRICES VAR
{VARIABLE {VAR}.price.bomb $global_price.bomb}
{VARIABLE {VAR}.price.net $global_price.net}
{VARIABLE {VAR}.price.poison $global_price.poison}

{VARIABLE {VAR}.price.health_potion $global_price.health_potion}
{VARIABLE {VAR}.price.endurance_potion $global_price.endurance_potion}
{VARIABLE {VAR}.price.stamina_potion $global_price.stamina_potion}
{VARIABLE {VAR}.price.life_potion $global_price.life_potion}

{VARIABLE {VAR}.price.brainhaste_tonic $global_price.brainhaste_tonic}
{VARIABLE {VAR}.price.mind_juice $global_price.mind_juice}

{VARIABLE {VAR}.price.antidote $global_price.antidote}
{VARIABLE {VAR}.price.speed_serum $global_price.speed_serum}
{VARIABLE {VAR}.price.energy_cocktail $global_price.energy_cocktail}
{VARIABLE {VAR}.price.bloodlust_bile $global_price.bloodlust_bile}
{VARIABLE {VAR}.price.frenzy_fluid $global_price.frenzy_fluid}

{VARIABLE {VAR}.price.clay $global_price.clay}
{VARIABLE {VAR}.price.slime $global_price.slime}
{VARIABLE {VAR}.price.gold_nugget $global_price.gold_nugget}
{VARIABLE {VAR}.price.ulox_rock $global_price.ulox_rock}
{VARIABLE {VAR}.price.huanti_leaves $global_price.huanti_leaves}
{VARIABLE {VAR}.price.yoll_tree_bark $global_price.yoll_tree_bark}
{VARIABLE {VAR}.price.fang $global_price.fang}
{VARIABLE {VAR}.price.scorpion_tail $global_price.scorpion_tail}
{VARIABLE {VAR}.price.lizard_tail $global_price.lizard_tail}
{VARIABLE {VAR}.price.dragon_tail $global_price.dragon_tail}

{VARIABLE {VAR}.price.walking_boots $global_price.walking_boots}
{VARIABLE {VAR}.price.elven_boots $global_price.elven_boots}
{VARIABLE {VAR}.price.nim_boots $global_price.nim_boots}
{VARIABLE {VAR}.price.snow_shoes $global_price.snow_shoes}
{VARIABLE {VAR}.price.map $global_price.map}
{VARIABLE {VAR}.price.magic_bean $global_price.magic_bean}
{VARIABLE {VAR}.price.tent $global_price.tent}
{VARIABLE {VAR}.price.suicide_bomb $global_price.suicide_bomb}
{VARIABLE {VAR}.price.tongue_of_mockery $global_price.tongue_of_mockery}
{VARIABLE {VAR}.price.unlit_lantern $global_price.unlit_lantern}

{VARIABLE {VAR}.price.ring_of_swiftness $global_price.ring_of_swiftness}
{VARIABLE {VAR}.price.fire_ring $global_price.fire_ring}
{VARIABLE {VAR}.price.sky_ring $global_price.sky_ring}
{VARIABLE {VAR}.price.water_ring $global_price.water_ring}
{VARIABLE {VAR}.price.earth_ring $global_price.earth_ring}
{VARIABLE {VAR}.price.gold_ring $global_price.gold_ring}

{VARIABLE {VAR}.price.holy_sword $global_price.holy_sword}
{VARIABLE {VAR}.price.salamander_blade $global_price.salamander_blade}
{VARIABLE {VAR}.price.slayer $global_price.slayer}
{VARIABLE {VAR}.price.battle_axe $global_price.battle_axe}
{VARIABLE {VAR}.price.thunder_axe $global_price.thunder_axe}
{VARIABLE {VAR}.price.barbed_spear $global_price.barbed_spear}
{VARIABLE {VAR}.price.enchanted_spear $global_price.enchanted_spear}
{VARIABLE {VAR}.price.lance $global_price.lance}
{VARIABLE {VAR}.price.ice_rod $global_price.ice_rod}
{VARIABLE {VAR}.price.plague_staff $global_price.plague_staff}
{VARIABLE {VAR}.price.smasher $global_price.smasher}
{VARIABLE {VAR}.price.nipper $global_price.nipper}
{VARIABLE {VAR}.price.frost_bow $global_price.frost_bow}
{VARIABLE {VAR}.price.storm_bow $global_price.storm_bow}
{VARIABLE {VAR}.price.fire_bow $global_price.fire_bow}
{VARIABLE {VAR}.price.tomahawk $global_price.tomahawk}
{VARIABLE {VAR}.price.feathered_javelin $global_price.feathered_javelin}
{VARIABLE {VAR}.price.heavy_crossbow $global_price.heavy_crossbow}
{VARIABLE {VAR}.price.customised_sling $global_price.customised_sling}
#enddef

####################################################################################
# Generic Shops
####################################################################################

# These macros can be used to quickly place generic shops (without having to specify the shop's stock)
# An Apothecary stocks potions; a Market stocks raw materials and a few misc items; while an Armoury stocks weapons and traps
# Example: {BOB_PLACE_GENERIC_APOTHECARY "Tunisso Temple" tunisso_temple scenery/temple1.png 52 25}

#define BOB_PLACE_GENERIC_APOTHECARY NAME VAR IMAGE X Y
{VARIABLE {VAR}.stock.antidote 5}
{VARIABLE {VAR}.stock.health_potion 6}
{VARIABLE {VAR}.stock.stamina_potion 4}
{VARIABLE {VAR}.stock.endurance_potion 3}
{VARIABLE {VAR}.stock.life_potion 2}
{VARIABLE {VAR}.stock.brainhaste_tonic 3}
{VARIABLE {VAR}.stock.mind_juice 2}
{VARIABLE {VAR}.stock.speed_serum 3}
{VARIABLE {VAR}.stock.energy_cocktail 3}
{VARIABLE {VAR}.stock.frenzy_fluid 2}
{VARIABLE {VAR}.stock.bloodlust_bile 2}
{BOB_DEFINE_LOCAL_PRICES {VAR}}
{BOB_PLACE_SHOP ({NAME}) {VAR} {IMAGE} {X} {Y}}
#enddef

#define BOB_PLACE_GENERIC_MARKET NAME VAR IMAGE X Y
{VARIABLE {VAR}.stock.clay 5}
{VARIABLE {VAR}.stock.slime 6}
{VARIABLE {VAR}.stock.gold_nugget 3}
{VARIABLE {VAR}.stock.ulox_rock 4}
{VARIABLE {VAR}.stock.huanti_leaves 8}
{VARIABLE {VAR}.stock.yoll_tree_bark 4}
{VARIABLE {VAR}.stock.fang 4}
{VARIABLE {VAR}.stock.lizard_tail 3}
{VARIABLE {VAR}.stock.scorpion_tail 3}
{VARIABLE {VAR}.stock.snow_shoes 4}
{VARIABLE {VAR}.stock.unlit_lantern 2}
{VARIABLE {VAR}.stock.walking_boots 2}
{VARIABLE {VAR}.stock.magic_bean 3}
{VARIABLE {VAR}.stock.tent 1}
{VARIABLE {VAR}.stock.map 2}
{BOB_DEFINE_LOCAL_PRICES {VAR}}
{BOB_PLACE_SHOP ({NAME}) {VAR} {IMAGE} {X} {Y}}
#enddef

#define BOB_PLACE_GENERIC_ARMOURY NAME VAR IMAGE X Y
# Weapons: Melee
{VARIABLE {VAR}.stock.holy_sword 2}
{VARIABLE {VAR}.stock.salamander_blade 1}
{VARIABLE {VAR}.stock.slayer 1}
{VARIABLE {VAR}.stock.battle_axe 2}
{VARIABLE {VAR}.stock.thunder_axe 1}
{VARIABLE {VAR}.stock.barbed_spear 2}
{VARIABLE {VAR}.stock.enchanted_spear 1}
{VARIABLE {VAR}.stock.lance 1}
{VARIABLE {VAR}.stock.ice_rod 1}
{VARIABLE {VAR}.stock.plague_staff 1}
{VARIABLE {VAR}.stock.smasher 1}
{VARIABLE {VAR}.stock.nipper 1}
# Weapons: Ranged
{VARIABLE {VAR}.stock.frost_bow 1}
{VARIABLE {VAR}.stock.storm_bow 1}
{VARIABLE {VAR}.stock.fire_bow 2}
{VARIABLE {VAR}.stock.tomahawk 2}
{VARIABLE {VAR}.stock.feathered_javelin 2}
{VARIABLE {VAR}.stock.heavy_crossbow 2}
{VARIABLE {VAR}.stock.customised_sling 1}
# Traps
{VARIABLE {VAR}.stock.net 4}
{VARIABLE {VAR}.stock.bomb 4}
{VARIABLE {VAR}.stock.poison 4}
# Misc
{VARIABLE {VAR}.stock.suicide_bomb 5}
{BOB_DEFINE_LOCAL_PRICES {VAR}}
{BOB_PLACE_SHOP ({NAME}) {VAR} {IMAGE} {X} {Y}}
#enddef

#define BOB_PLACE_GENERIC_SHOP NAME VAR IMAGE X Y
# This is only really for the competitive mode shops
{VARIABLE {VAR}.stock.bomb 3}
{VARIABLE {VAR}.stock.poison 3}
{VARIABLE {VAR}.stock.net 3}
# Potions
{VARIABLE {VAR}.stock.health_potion 10}
{VARIABLE {VAR}.stock.endurance_potion 7}
{VARIABLE {VAR}.stock.stamina_potion 5}
{VARIABLE {VAR}.stock.life_potion 5}
{VARIABLE {VAR}.stock.brainhaste_tonic 7}
{VARIABLE {VAR}.stock.mind_juice 5}
{VARIABLE {VAR}.stock.antidote 10}
{VARIABLE {VAR}.stock.speed_serum 7}
{VARIABLE {VAR}.stock.energy_cocktail 5}
{VARIABLE {VAR}.stock.bloodlust_bile 5}
{VARIABLE {VAR}.stock.frenzy_fluid 5}
# Raw Materials
{VARIABLE {VAR}.stock.huanti_leaves 20}
{VARIABLE {VAR}.stock.slime 20}
{VARIABLE {VAR}.stock.ulox_rock 20}
{VARIABLE {VAR}.stock.scorpion_tail 15}
{VARIABLE {VAR}.stock.yoll_tree_bark 15}
{VARIABLE {VAR}.stock.gold_nugget 15}
{VARIABLE {VAR}.stock.fang 15}
{VARIABLE {VAR}.stock.clay 10}
{VARIABLE {VAR}.stock.lizard_tail 10}
{VARIABLE {VAR}.stock.dragon_tail 1}
# Misc Items
{VARIABLE {VAR}.stock.walking_boots 1}
{VARIABLE {VAR}.stock.elven_boots 1}
{VARIABLE {VAR}.stock.nim_boots 1}
{VARIABLE {VAR}.stock.snow_shoes 1}
{VARIABLE {VAR}.stock.map 2}
{VARIABLE {VAR}.stock.tent 1}
{VARIABLE {VAR}.stock.magic_bean 3}
{VARIABLE {VAR}.stock.suicide_bomb 5}
{VARIABLE {VAR}.stock.tongue_of_mockery 3}
{VARIABLE {VAR}.stock.unlit_lantern 1}
# Jewellery
{VARIABLE {VAR}.stock.ring_of_swiftness 1}
{VARIABLE {VAR}.stock.fire_ring 1}
{VARIABLE {VAR}.stock.sky_ring 1}
{VARIABLE {VAR}.stock.water_ring 1}
{VARIABLE {VAR}.stock.earth_ring 1}
{VARIABLE {VAR}.stock.gold_ring 0}
# Weapons: Melee
{VARIABLE {VAR}.stock.holy_sword 1}
{VARIABLE {VAR}.stock.salamander_blade 1}
{VARIABLE {VAR}.stock.slayer 1}
{VARIABLE {VAR}.stock.battle_axe 1}
{VARIABLE {VAR}.stock.thunder_axe 1}
{VARIABLE {VAR}.stock.barbed_spear 1}
{VARIABLE {VAR}.stock.enchanted_spear 1}
{VARIABLE {VAR}.stock.lance 1}
{VARIABLE {VAR}.stock.ice_rod 1}
{VARIABLE {VAR}.stock.plague_staff 1}
{VARIABLE {VAR}.stock.smasher 1}
{VARIABLE {VAR}.stock.nipper 1}
# Weapons: Ranged
{VARIABLE {VAR}.stock.frost_bow 1}
{VARIABLE {VAR}.stock.storm_bow 1}
{VARIABLE {VAR}.stock.fire_bow 1}
{VARIABLE {VAR}.stock.tomahawk 1}
{VARIABLE {VAR}.stock.feathered_javelin 1}
{VARIABLE {VAR}.stock.heavy_crossbow 1}
{VARIABLE {VAR}.stock.customised_sling 1}

{BOB_DEFINE_LOCAL_PRICES {VAR}}
{BOB_PLACE_SHOP ({NAME}) {VAR} {IMAGE} {X} {Y}}
#enddef

####################################################################################
# Manipulating individual shops
####################################################################################

# The stock and prices of each shop can be manipulated easily

# {VARIABLE_OP trindle_market.stock.bomb add 2} increases the number of bombs for sale in Trindle Market
# {VARIABLE_OP trindle_market.stock add 1} increases the number of all items for sale in Trindle Market

# {VARIABLE_OP tunisso_temple.price.slime add 5} increases the price of slime by 5g in Tunisso Temple
# {VARIABLE_OP tunisso_temple.price add 3} increases the price of all items by 3g in Tunisso Temple


####################################################################################
# The main shop macro
####################################################################################

# The benefit of using the main shop macro is that you can directly specify which items it stocks

#define BOB_PLACE_SHOP NAME VAR IMAGE X Y

# Define local prices
[event]
name="start"
first_time_only=no
	{BOB_DEFINE_LOCAL_PRICES {VAR}}
[/event]

# Set image and label
[event]
name="side turn"
first_time_only=no
	[label]
		text={NAME}
		x={X}
		y={Y}
	[/label]
	[item]
		image={IMAGE}
		x={X}
		y={Y}
	[/item]
[/event]

# The event for entering the shop
[event]
name=moveto
first_time_only=no
[filter]
x={X}
y={Y}
canrecruit=yes
[filter_wml]
	[variables]
		character_status=active
	[/variables]
[/filter_wml]
[/filter]

# Define local prices again, in case they have been modified
{BOB_DEFINE_LOCAL_PRICES {VAR}}

[store_side]
	side=$side_number
	variable=shopper
	[/store_side]
{VARIABLE shopping_finished no}
[while]
{BOB_CONDITION shopping_finished equals no}
[do]
	
[message]
	speaker=narrator
	image={IMAGE}
	caption={NAME}
	message= _ "What will you buy?"

[option]
message= _ {MENU_IMG_TXT2 "icons/blank-icon.png" " " _"Return To Game"}
[command]
{VARIABLE shopping_finished yes}
[/command]
[/option]
	

####################################################################################
# Traps
####################################################################################

#####################
# Bomb
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/bomb.png" "${VAR}.stock.bomb" _"<span color='{BOB_GREEN}'>Bomb</span>
<span size='small'>A trap that does 12 points of damage when stepped on</span>
<span size='small'>Cost: ${VAR}.price.bomb</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.bomb greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.bomb}
	[then]
		{VARIABLE_OP {VAR}.stock.bomb add -1}
		{VARIABLE_OP inventory[$side_number].bomb add 1}
		{VARIABLE_OP shopper.gold add -${VAR}.price.bomb}
		{BOB_GOLD $side_number -${VAR}.price.bomb}
		{BOB_PRINT ("$character[$side_number].name has bought a bomb")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Poison
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/poison.png" "${VAR}.stock.poison" _"<span color='{BOB_GREEN}'>Poison</span>
<span size='small'>A trap that poisons when stepped on</span>
<span size='small'>Cost: ${VAR}.price.poison</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.poison greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.poison}
	[then]
		{VARIABLE_OP {VAR}.stock.poison add -1}
		{VARIABLE_OP inventory[$side_number].poison add 1}
		{BOB_GOLD $side_number -${VAR}.price.poison}
		{VARIABLE_OP shopper.gold add -${VAR}.price.poison}
		{BOB_PRINT ("$character[$side_number].name has bought some Poison")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Net
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/net.png" "${VAR}.stock.net" _"<span color='{BOB_GREEN}'>Net</span>
<span size='small'>A trap that slows when stepped on</span>
<span size='small'>Cost: ${VAR}.price.net</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.net greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.net}
	[then]
		{VARIABLE_OP {VAR}.stock.net add -1}
		{VARIABLE_OP inventory[$side_number].net add 1}
		{BOB_GOLD $side_number -${VAR}.price.net}
		{VARIABLE_OP shopper.gold add -${VAR}.price.net}
		{BOB_PRINT ("$character[$side_number].name has bought a Net")}
		{BOB_REDRAW}
	[/then]
[/if]	
[/command]
[/option]

####################################################################################
# Potions
####################################################################################

#####################
# Red
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/health_potion.png" "${VAR}.stock.health_potion" _"<span color='{BOB_GREEN}'>Health Potion</span> 
<span size='small'>Restores 6 hitpoints</span>
<span size='small'>Cost: ${VAR}.price.health_potion</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.health_potion greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.health_potion}
	[then]
		{VARIABLE_OP {VAR}.stock.health_potion add -1}
		{VARIABLE_OP inventory[$side_number].health_potion add 1}
		{BOB_GOLD $side_number -${VAR}.price.health_potion}
		{VARIABLE_OP shopper.gold add -${VAR}.price.health_potion}
		{BOB_PRINT ("$character[$side_number].name has bought a Health Potion")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/endurance_potion.png" "${VAR}.stock.endurance_potion" _"<span color='{BOB_GREEN}'>Endurance Potion</span>
<span size='small'>Restores 10 hitpoints and adds 1 max hitpoint</span>
<span size='small'>Cost: ${VAR}.price.endurance_potion</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.endurance_potion greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.endurance_potion}
	[then]
		{VARIABLE_OP inventory[$side_number].endurance_potion add 1}
		{VARIABLE_OP {VAR}.stock.endurance_potion add -1}
		{BOB_GOLD $side_number -${VAR}.price.endurance_potion}
		{VARIABLE_OP shopper.gold add -${VAR}.price.endurance_potion}
		{BOB_PRINT ("$character[$side_number].name has bought an Endurance Potion")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/stamina_potion.png" "${VAR}.stock.stamina_potion" _"<span color='{BOB_GREEN}'>Stamina Potion</span>
<span size='small'>Adds 3 max hitpoints</span>
<span size='small'>Cost: ${VAR}.price.stamina_potion</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.stamina_potion greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.stamina_potion}
	[then]
		{VARIABLE_OP inventory[$side_number].stamina_potion add 1}
		{VARIABLE_OP {VAR}.stock.stamina_potion add -1}
		{BOB_GOLD $side_number -${VAR}.price.stamina_potion}
		{VARIABLE_OP shopper.gold add -${VAR}.price.stamina_potion}
		{BOB_PRINT ("$character[$side_number].name has bought a Stamina Potion")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/life_potion.png" "${VAR}.stock.life_potion" _"<span color='{BOB_GREEN}'>Life Potion</span>
<span size='small'>Restores 20 hitpoints</span>
<span size='small'>Cost: ${VAR}.price.life_potion</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.life_potion greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.life_potion}
	[then]
		{VARIABLE_OP {VAR}.stock.life_potion add -1}
		{VARIABLE_OP inventory[$side_number].life_potion add 1}
		{BOB_GOLD $side_number -${VAR}.price.life_potion}
		{VARIABLE_OP shopper.gold add -${VAR}.price.life_potion}
		{BOB_PRINT ("$character[$side_number].name has bought a Life Potion")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Purple
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/brainhaste_tonic.png" "${VAR}.stock.brainhaste_tonic" _"<span color='{BOB_GREEN}'>Brainhaste Tonic</span>
<span size='small'>Adds 4 experience</span>
<span size='small'>Cost: ${VAR}.price.brainhaste_tonic</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.brainhaste_tonic greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.brainhaste_tonic}
	[then]
		{VARIABLE_OP {VAR}.stock.brainhaste_tonic add -1}
		{VARIABLE_OP inventory[$side_number].brainhaste_tonic add 1}
		{BOB_GOLD $side_number -${VAR}.price.brainhaste_tonic}
		{VARIABLE_OP shopper.gold add -${VAR}.price.brainhaste_tonic}
		{BOB_PRINT ("$character[$side_number].name has bought a Brainhaste Tonic")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/mind_juice.png" "${VAR}.stock.mind_juice" _"<span color='{BOB_GREEN}'>Mind Juice</span>
<span size='small'>-3 max experience</span>
<span size='small'>Cost: ${VAR}.price.mind_juice</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.mind_juice greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.mind_juice}
	[then]
		{VARIABLE_OP inventory[$side_number].mind_juice add 1}
		{VARIABLE_OP {VAR}.stock.mind_juice add -1}
		{BOB_GOLD $side_number -${VAR}.price.mind_juice}
		{VARIABLE_OP shopper.gold add -${VAR}.price.mind_juice}
		{BOB_PRINT ("$character[$side_number].name has bought some Mind Juice")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Green
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/antidote.png" "${VAR}.stock.antidote" _"<span color='{BOB_GREEN}'>Antidote</span>
<span size='small'>Cures poison</span>
<span size='small'>Cost: ${VAR}.price.antidote</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.antidote greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.antidote}
	[then]
		{VARIABLE_OP {VAR}.stock.antidote add -1}
		{VARIABLE_OP inventory[$side_number].antidote add 1}
		{BOB_GOLD $side_number -${VAR}.price.antidote}
		{VARIABLE_OP shopper.gold add -${VAR}.price.antidote}
		{BOB_PRINT ("$character[$side_number].name has bought a some Antidote")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/speed_serum.png" "${VAR}.stock.speed_serum" _"<span color='{BOB_GREEN}'>Speed Serum</span>
<span size='small'>Restores moves but poisons your metabolism</span>
<span size='small'>Cost: ${VAR}.price.speed_serum</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.speed_serum greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.speed_serum}
	[then]
		{VARIABLE_OP {VAR}.stock.speed_serum add -1}
		{VARIABLE_OP inventory[$side_number].speed_serum add 1}
		{BOB_GOLD $side_number -${VAR}.price.speed_serum}
		{VARIABLE_OP shopper.gold add -${VAR}.price.speed_serum}
		{BOB_PRINT ("$character[$side_number].name has bought some Speed Serum")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Blue
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/energy_cocktail.png" "${VAR}.stock.energy_cocktail" _"<span color='{BOB_GREEN}'>Energy Cocktail</span>
<span size='small'>Restores moves after next combat</span>
<span size='small'>Cost: ${VAR}.price.energy_cocktail</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.energy_cocktail greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.energy_cocktail}
	[then]
		{VARIABLE_OP {VAR}.stock.energy_cocktail add -1}
		{VARIABLE_OP inventory[$side_number].energy_cocktail add 1}
		{BOB_GOLD $side_number -${VAR}.price.energy_cocktail}
		{VARIABLE_OP shopper.gold add -${VAR}.price.energy_cocktail}
		{BOB_PRINT ("$character[$side_number].name has bought an Energy Cocktail")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/bloodlust_bile.png" "${VAR}.stock.bloodlust_bile" _"<span color='{BOB_GREEN}'>Bloodlust Bile</span>
<span size='small'>If you kill an enemy when you next enter combat, you can attack again</span>
<span size='small'>Cost: ${VAR}.price.bloodlust_bile</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.bloodlust_bile greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.bloodlust_bile}
	[then]
		{VARIABLE_OP {VAR}.stock.bloodlust_bile add -1}
		{VARIABLE_OP inventory[$side_number].bloodlust_bile add 1}
		{BOB_GOLD $side_number -${VAR}.price.bloodlust_bile}
		{VARIABLE_OP shopper.gold add -${VAR}.price.bloodlust_bile}
		{BOB_PRINT ("$character[$side_number].name has bought some Bloodlust Bile")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/potions/frenzy_fluid.png" "${VAR}.stock.frenzy_fluid" _"<span color='{BOB_GREEN}'>Frenzy Fluid</span>
<span size='small'>Your next combat will last two rounds</span>
<span size='small'>Cost: ${VAR}.price.frenzy_fluid</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.frenzy_fluid greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.frenzy_fluid}
	[then]
		{VARIABLE_OP {VAR}.stock.frenzy_fluid add -1}
		{VARIABLE_OP inventory[$side_number].frenzy_fluid add 1}
		{BOB_GOLD $side_number -${VAR}.price.frenzy_fluid}
		{VARIABLE_OP shopper.gold add -${VAR}.price.frenzy_fluid}
		{BOB_PRINT ("$character[$side_number].name has bought some Frenzy Fluid")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

####################################################################################
# Raw Materials
####################################################################################

[option]
message= _ {MENU_IMG_TXT2 "attacks/mud-glob.png" "${VAR}.stock.clay" _"<span color='{BOB_GREEN}'>Clay</span>
<span size='small'>Raw ingredient used in conjuring</span>
<span size='small'>Cost: ${VAR}.price.clay</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.clay greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.clay}
	[then]
		{VARIABLE_OP {VAR}.stock.clay add -1}
		{VARIABLE_OP inventory[$side_number].clay add 1}
		{BOB_GOLD $side_number -${VAR}.price.clay}
		{VARIABLE_OP shopper.gold add -${VAR}.price.clay}
		{BOB_PRINT ("$character[$side_number].name has bought some clay")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/slime.png" "${VAR}.stock.slime" _"<span color='{BOB_GREEN}'>Slime</span>
<span size='small'>Raw ingredient used by most talents</span>
<span size='small'>Cost: ${VAR}.price.slime</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.slime greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.slime}
	[then]
		{VARIABLE_OP {VAR}.stock.slime add -1}
		{VARIABLE_OP inventory[$side_number].slime add 1}
		{BOB_GOLD $side_number -${VAR}.price.slime}
		{VARIABLE_OP shopper.gold add -${VAR}.price.slime}
		{BOB_PRINT ("$character[$side_number].name has bought some slime")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/gold_nugget.png" "${VAR}.stock.gold_nugget" _"<span color='{BOB_GREEN}'>Gold Nugget</span>
<span size='small'>Raw ingredient used in concoction</span>
<span size='small'>Cost: ${VAR}.price.gold_nugget</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.gold_nugget greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.gold_nugget}
	[then]
		{VARIABLE_OP {VAR}.stock.gold_nugget add -1}
		{VARIABLE_OP inventory[$side_number].gold_nugget add 1}
		{BOB_GOLD $side_number -${VAR}.price.gold_nugget}
		{VARIABLE_OP shopper.gold add -${VAR}.price.gold_nugget}
		{BOB_PRINT ("$character[$side_number].name has bought a gold nugget")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/ulox_rock.png" "${VAR}.stock.ulox_rock" _"<span color='{BOB_GREEN}'>Ulox Rock</span>
<span size='small'>Raw ingredient used in weaponcraft, herbalism, traps and concoction</span>
<span size='small'>Cost: ${VAR}.price.ulox_rock</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.ulox_rock greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.ulox_rock}
	[then]
		{VARIABLE_OP {VAR}.stock.ulox_rock add -1}
		{VARIABLE_OP inventory[$side_number].ulox_rock add 1}
		{BOB_GOLD $side_number -${VAR}.price.ulox_rock}
		{VARIABLE_OP shopper.gold add -${VAR}.price.ulox_rock}
		{BOB_PRINT ("$character[$side_number].name has bought a ulox rock")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/huanti_leaves.png" "${VAR}.stock.huanti_leaves" _"<span color='{BOB_GREEN}'>Huanti Leaves</span>
<span size='small'>Raw ingredient used in herbalism and concoction</span>
<span size='small'>Cost: ${VAR}.price.huanti_leaves</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.huanti_leaves greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.huanti_leaves}
	[then]
		{VARIABLE_OP {VAR}.stock.huanti_leaves add -1}
		{VARIABLE_OP inventory[$side_number].huanti_leaves add 1}
		{BOB_GOLD $side_number -${VAR}.price.huanti_leaves}
		{VARIABLE_OP shopper.gold add -${VAR}.price.huanti_leaves}
		{BOB_PRINT ("$character[$side_number].name has bought some huanti leaves")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/yoll_tree_bark.png" "${VAR}.stock.yoll_tree_bark" _"<span color='{BOB_GREEN}'>Yoll Tree Bark</span>
<span size='small'>Raw ingredient used in herbalism, traps and concoction</span>
<span size='small'>Cost: ${VAR}.price.yoll_tree_bark</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.yoll_tree_bark greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.yoll_tree_bark}
	[then]
		{VARIABLE_OP {VAR}.stock.yoll_tree_bark add -1}
		{VARIABLE_OP inventory[$side_number].yoll_tree_bark add 1}
		{BOB_GOLD $side_number -${VAR}.price.yoll_tree_bark}
		{VARIABLE_OP shopper.gold add -${VAR}.price.yoll_tree_bark}
		{BOB_PRINT ("$character[$side_number].name has bought some Yoll Tree bark")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/fang.png" "${VAR}.stock.fang" _"<span color='{BOB_GREEN}'>Fang</span>
<span size='small'>Raw ingredient used in concoction and conjuring</span>
<span size='small'>Cost: ${VAR}.price.fang</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.fang greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.fang}
	[then]
		{VARIABLE_OP {VAR}.stock.fang add -1}
		{VARIABLE_OP inventory[$side_number].fang add 1}
		{BOB_GOLD $side_number -${VAR}.price.fang}
		{VARIABLE_OP shopper.gold add -${VAR}.price.fang}
		{BOB_PRINT ("$character[$side_number].name has bought a fang")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/lizard_tail.png" "${VAR}.stock.lizard_tail" _"<span color='{BOB_GREEN}'>Lizard Tail</span>
<span size='small'>Raw ingredient used in conjuring</span>
<span size='small'>Cost: ${VAR}.price.lizard_tail</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.lizard_tail greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.lizard_tail}
	[then]
		{VARIABLE_OP {VAR}.stock.lizard_tail add -1}
		{VARIABLE_OP inventory[$side_number].lizard_tail add 1}
		{BOB_GOLD $side_number -${VAR}.price.lizard_tail}
		{VARIABLE_OP shopper.gold add -${VAR}.price.lizard_tail}
		{BOB_PRINT ("$character[$side_number].name has bought a lizard tail")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/scorpion_tail.png" "${VAR}.stock.scorpion_tail" _"<span color='{BOB_GREEN}'>Scorpion Tail</span>
<span size='small'>Raw ingredient used in weaponcraft, herbalism, traps, concoction and conjuring</span>
<span size='small'>Cost: ${VAR}.price.scorpion_tail</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.scorpion_tail greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.scorpion_tail}
	[then]
		{VARIABLE_OP {VAR}.stock.scorpion_tail add -1}
		{VARIABLE_OP inventory[$side_number].scorpion_tail add 1}
		{BOB_GOLD $side_number -${VAR}.price.scorpion_tail}
		{VARIABLE_OP shopper.gold add -${VAR}.price.scorpion_tail}
		{BOB_PRINT ("$character[$side_number].name has bought a scorpion tail")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/materials/dragon_tail.png" "${VAR}.stock.dragon_tail" _"<span color='{BOB_GREEN}'>Dragon Tail</span>
<span size='small'>Raw ingredient used in herbalism and conjuring</span>
<span size='small'>Cost: ${VAR}.price.dragon_tail</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.dragon_tail greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.dragon_tail}
	[then]
		{VARIABLE_OP {VAR}.stock.dragon_tail add -1}
		{VARIABLE_OP inventory[$side_number].dragon_tail add 1}
		{BOB_GOLD $side_number -${VAR}.price.dragon_taill}
		{VARIABLE_OP shopper.gold add -${VAR}.price.dragon_tail}
		{BOB_PRINT ("$character[$side_number].name has bought a dragon tail")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

####################################################################################
# Misc Items
####################################################################################

#####################
# Walking Boots
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/walking_boots.png" "${VAR}.stock.walking_boots" _"<span color='{BOB_GREEN}'>Walking Boots</span>
<span size='small'>+1 movement</span>
<span size='small'>Cost: ${VAR}.price.walking_boots</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.walking_boots greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.walking_boots}
	[then]
		{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 1}
		{VARIABLE_OP {VAR}.stock.walking_boots add -1}
		{VARIABLE_OP inventory[$side_number].walking_boots add 1}
		{BOB_GOLD $side_number -${VAR}.price.walking_boots}
		{VARIABLE_OP shopper.gold add -${VAR}.price.walking_boots}
		{BOB_PRINT ("$character[$side_number].name has bought some walking boots")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Elven Boots
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/elven_boots.png" "${VAR}.stock.elven_boots" _"<span color='{BOB_GREEN}'>Elven Boots</span>
<span size='small'>+2 movement</span>
<span size='small'>Cost: ${VAR}.price.elven_boots</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.elven_boots greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.elven_boots}
	[then]
		{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 2}
		{VARIABLE_OP {VAR}.stock.elven_boots add -1}
		{VARIABLE_OP inventory[$side_number].elven_boots add 1}
		{BOB_GOLD $side_number -${VAR}.price.elven_boots}
		{VARIABLE_OP shopper.gold add -${VAR}.price.elven_boots}
		{BOB_PRINT ("$character[$side_number].name has bought some elven boots")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Nim Boots
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/nim_boots.png" "${VAR}.stock.nim_boots" _"<span color='{BOB_GREEN}'>Nim Boots</span>
<span size='small'>+10% defence on flat terrain</span>
<span size='small'>Cost: ${VAR}.price.nim_boots</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.nim_boots greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.nim_boots}
	[then]
		{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 1}
		{VARIABLE_OP {VAR}.stock.nim_boots add -1}
		{VARIABLE_OP inventory[$side_number].nim_boots add 1}
		{BOB_GOLD $side_number -${VAR}.price.nim_boots}
		{VARIABLE_OP shopper.gold add -${VAR}.price.nim_boots}
		{BOB_PRINT ("$character[$side_number].name has bought some Nim Boots")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Snowshoes
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/snow_shoes.png" "${VAR}.stock.snow_shoes" _"<span color='{BOB_GREEN}'>Snow Shoes</span>
<span size='small'>Reduces movement cost on tundra by 1, but reduces movement by 1</span>
<span size='small'>Cost: ${VAR}.price.snow_shoes</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.snow_shoes greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.snow_shoes}
	[then]
		{VARIABLE_OP {VAR}.stock.snow_shoes add -1}
		{VARIABLE_OP inventory[$side_number].snow_shoes add 1}
		{BOB_GOLD $side_number -${VAR}.price.snow_shoes}
		{VARIABLE_OP shopper.gold add -${VAR}.price.snow_shoes}
		{BOB_PRINT ("$character[$side_number].name has bought some snow shoes")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Map
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/map.png" "${VAR}.stock.map" _"<span color='{BOB_GREEN}'>Map</span>
<span size='small'>Removes all shroud within 10 hexes</span>
<span size='small'>Cost: ${VAR}.price.map</span>"}
[show_if]
# the map doesn't work yet so i have stopped this from showing
	{BOB_CONDITION {VAR}.stock.map greater_than_equal_to 400}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.map}
	[then]
		{VARIABLE_OP {VAR}.stock.map add -1}
		{VARIABLE_OP inventory[$side_number].map add 1}
		{BOB_GOLD $side_number -${VAR}.price.map}
		{VARIABLE_OP shopper.gold add -${VAR}.price.map}
		{BOB_PRINT ("$character[$side_number].name has bought a map")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Magic Bean
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/magic_bean.png" "${VAR}.stock.magic_bean" _"<span color='{BOB_GREEN}'>Magic Bean</span>
<span size='small'>Converts grassland or savanna to great tree</span>
<span size='small'>Cost: ${VAR}.price.magic_bean</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.magic_bean greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.magic_bean}
	[then]
		{VARIABLE_OP {VAR}.stock.magic_bean add -1}
		{VARIABLE_OP inventory[$side_number].magic_bean add 1}
		{BOB_GOLD $side_number -${VAR}.price.magic_bean}
		{VARIABLE_OP shopper.gold add -${VAR}.price.magic_bean}
		{BOB_PRINT ("$character[$side_number].name has bought a magic bean")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Tent
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/tent.png" "${VAR}.stock.tent" _"<span color='{BOB_GREEN}'>Tent</span>
<span size='small'>Creates temporary mini-village which heals +4HP each turn</span>
<span size='small'>Cost: ${VAR}.price.tent</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.tent greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.tent}
	[then]
		{VARIABLE_OP {VAR}.stock.tent add -1}
		{VARIABLE_OP inventory[$side_number].tent add 1}
		{BOB_GOLD $side_number -${VAR}.price.tent}
		{VARIABLE_OP shopper.gold add -${VAR}.price.tent}
		{BOB_PRINT ("$character[$side_number].name has bought a tent")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Suicide Bomb
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/suicide_bomb.png" "${VAR}.stock.suicide_bomb" _"<span color='{BOB_GREEN}'>Suicide Bomb</span>
<span size='small'>Inflicts 10 damage on all adjacent units, including yourself</span>
<span size='small'>Cost: ${VAR}.price.suicide_bomb</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.suicide_bomb greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.suicide_bomb}
	[then]
		{VARIABLE_OP {VAR}.stock.suicide_bomb add -1}
		{VARIABLE_OP inventory[$side_number].suicide_bomb add 1}
		{BOB_GOLD $side_number -${VAR}.price.suicide_bomb}
		{VARIABLE_OP shopper.gold add -${VAR}.price.suicide_bomb}
		{BOB_PRINT ("$character[$side_number].name has bought a suicide bomb")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Tongue Of Mockery
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/tongue_of_mockery.png" "${VAR}.stock.tongue_of_mockery" _"<span color='{BOB_GREEN}'>Tongue Of Mockery</span>
<span size='small'>Sends all adjacent units into a mini-berserk frenzy</span>
<span size='small'>Cost: ${VAR}.price.tongue_of_mockery</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.tongue_of_mockery greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.tongue_of_mockery}
	[then]
		{VARIABLE_OP {VAR}.stock.tongue_of_mockery add -1}
		{VARIABLE_OP inventory[$side_number].tongue_of_mockery add 1}
		{BOB_GOLD $side_number -${VAR}.price.tongue_of_mockery}
		{VARIABLE_OP shopper.gold add -${VAR}.price.tongue_of_mockery}
		{BOB_PRINT ("$character[$side_number].name has bought the Tongue Of Mockery")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Lantern
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/misc_items/unlit_lantern.png" "${VAR}.stock.unlit_lantern" _"<span color='{BOB_GREEN}'>Lantern</span>
<span size='small'>Gives the brightens ability: 10% lawful TOD bonus</span>
<span size='small'>Cost: ${VAR}.price.unlit_lantern</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.unlit_lantern greater_than_equal_to 1}
	# this is to disable it
	{BOB_CONDITION character[$side_number].bob equals bob}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.unlit_lantern}
	[then]
		{VARIABLE_OP {VAR}.stock.unlit_lantern add -1}
		{VARIABLE_OP inventory[$side_number].unlit_lantern add 1}
		{BOB_GOLD $side_number -${VAR}.price.unlit_lantern}
		{VARIABLE_OP shopper.gold add -${VAR}.price.unlit_lantern}
		{BOB_PRINT ("$character[$side_number].name has bought a lantern")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

####################################################################################
# Rings
####################################################################################

#####################
# Ring of Swiftness
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/jewellery/gold_ring.png" "${VAR}.stock.ring_of_swiftness" _"<span color='{BOB_GREEN}'>Ring of Swiftness</span>
<span size='small'>+1 movement</span>
<span size='small'>Cost: ${VAR}.price.ring_of_swiftness</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.ring_of_swiftness greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.ring_of_swiftness}
	[then]
		{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 1}
		{VARIABLE_OP {VAR}.stock.ring_of_swiftness add -1}
		{VARIABLE_OP inventory[$side_number].ring_of_swiftness add 1}
		{BOB_GOLD $side_number -${VAR}.price.ring_of_swiftness}
		{VARIABLE_OP shopper.gold add -${VAR}.price.ring_of_swiftness}
		{BOB_PRINT ("$character[$side_number].name has bought a Ring of Swiftness")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Fire Ring
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/jewellery/red_ring.png" "${VAR}.stock.fire_ring" _"<span color='{BOB_GREEN}'>Fire Ring</span>
<span size='small'>+20% Fire Resistance</span>
<span size='small'>Cost: ${VAR}.price.fire_ring</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.fire_ring greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.fire_ring}
	[then]
		{BOB_MODIFY_RESISTANCE x=$x1 y=$y1 fire -20}
		{VARIABLE_OP {VAR}.stock.fire_ring add -1}
		{VARIABLE_OP inventory[$side_number].fire_ring add 1}
		{BOB_GOLD $side_number -${VAR}.price.fire_ring}
		{VARIABLE_OP shopper.gold add -${VAR}.price.fire_ring}
		{BOB_PRINT ("$character[$side_number].name has bought a Fire Ring")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Water Ring
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/jewellery/blue_ring.png" "${VAR}.stock.water_ring" _"<span color='{BOB_GREEN}'>Water Ring</span>
<span size='small'>+20% Cold Resistance</span>
<span size='small'>Cost: ${VAR}.price.water_ring</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.water_ring greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.water_ring}
	[then]
		{BOB_MODIFY_RESISTANCE x=$x1 y=$y1 cold -20}
		{VARIABLE_OP {VAR}.stock.water_ring add -1}
		{VARIABLE_OP inventory[$side_number].water_ring add 1}
		{BOB_GOLD $side_number -${VAR}.price.water_ring}
		{VARIABLE_OP shopper.gold add -${VAR}.price.water_ring}
		{BOB_PRINT ("$character[$side_number].name has bought a Water Ring")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Sky Ring
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/jewellery/white_ring.png" "${VAR}.stock.sky_ring" _"<span color='{BOB_GREEN}'>Sky Ring</span>
<span size='small'>+20% Arcane Resistance</span>
<span size='small'>Cost: ${VAR}.price.sky_ring</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.sky_ring greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.sky_ring}
	[then]
		{BOB_MODIFY_RESISTANCE x=$x1 y=$y1 arcane -20}
		{VARIABLE_OP {VAR}.stock.sky_ring add -1}
		{VARIABLE_OP inventory[$side_number].sky_ring add 1}
		{BOB_GOLD $side_number -${VAR}.price.sky_ring}
		{VARIABLE_OP shopper.gold add -${VAR}.price.sky_ring}
		{BOB_PRINT ("$character[$side_number].name has bought a Sky Ring")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Earth Ring
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/jewellery/brown_ring.png" "${VAR}.stock.earth_ring" _"<span color='{BOB_GREEN}'>Earth Ring</span>
<span size='small'>+20% Impact Resistance</span>
<span size='small'>Cost: ${VAR}.price.earth_ring</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.earth_ring greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.earth_ring}
	[then]
		{BOB_MODIFY_RESISTANCE x=$x1 y=$y1 impact -20}
		{VARIABLE_OP {VAR}.stock.earth_ring add -1}
		{VARIABLE_OP inventory[$side_number].earth_ring add 1}
		{BOB_GOLD $side_number -${VAR}.price.earth_ring}
		{VARIABLE_OP shopper.gold add -${VAR}.price.earth_ring}
		{BOB_PRINT ("$character[$side_number].name has bought an Earth Ring")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Gold Ring
#####################

[option]
message= _ {MENU_IMG_TXT2 "inventory/jewellery/gold_ring.png" "${VAR}.stock.gold_ring" _"<span color='{BOB_GREEN}'>Gold Ring</span>
<span size='small'>No special properties</span>
<span size='small'>Cost: ${VAR}.price.gold_ring</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.gold_ring greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.gold_ring}
	[then]
		{VARIABLE_OP {VAR}.stock.gold_ring add -1}
		{VARIABLE_OP inventory[$side_number].gold_ring add 1}
		{BOB_GOLD $side_number -${VAR}.price.gold_ring}
		{VARIABLE_OP shopper.gold add -${VAR}.price.gold_ring}
		{BOB_PRINT ("$character[$side_number].name has bought a gold ring")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

####################################################################################
# Weapons
####################################################################################

#####################
# Melee
#####################

[option]
message= _ {MENU_IMG_TXT2 "attacks/sword-holy.png" "${VAR}.stock.holy_sword" _"<span color='{BOB_GREEN}'>Holy Sword</span>
<span size='small'>Arcane melee weapon (Requires Swordsmanship)</span>
<span size='small'>Cost: ${VAR}.price.holy_sword</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.holy_sword greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.holy_sword}
	[then]
		{VARIABLE_OP {VAR}.stock.holy_sword add -1}
		{VARIABLE_OP inventory[$side_number].holy_sword add 1}
		{BOB_GOLD $side_number -${VAR}.price.holy_sword}
		{VARIABLE_OP shopper.gold add -${VAR}.price.holy_sword}
		{BOB_PRINT ("$character[$side_number].name has bought a holy sword")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/sword-flaming.png" "${VAR}.stock.salamander_blade" _"<span color='{BOB_GREEN}'>Salamander Blade</span>
<span size='small'>Fire melee weapon: +3 damage (Requires Swordsmanship)</span>
<span size='small'>Cost: ${VAR}.price.salamander_blade</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.salamander_blade greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.salamander_blade}
	[then]
		{VARIABLE_OP {VAR}.stock.salamander_blade add -1}
		{VARIABLE_OP inventory[$side_number].salamander_blade add 1}
		{BOB_GOLD $side_number -${VAR}.price.salamander_blade}
		{VARIABLE_OP shopper.gold add -${VAR}.price.salamander_blade}
		{BOB_PRINT ("$character[$side_number].name has bought the Salamander Blade")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/greatsword-orcish.png" "${VAR}.stock.slayer" _"<span color='{BOB_GREEN}'>Slayer</span>
<span size='small'>Blade melee weapon: Dread, +1 damage (Requires Swordsmanship)</span>
<span size='small'>Cost: ${VAR}.price.slayer</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.slayer greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.slayer}
	[then]
		{VARIABLE_OP {VAR}.stock.slayer add -1}
		{VARIABLE_OP inventory[$side_number].slayer add 1}
		{BOB_GOLD $side_number -${VAR}.price.slayer}
		{VARIABLE_OP shopper.gold add -${VAR}.price.slayer}
		{BOB_PRINT ("$character[$side_number].name has bought the Slayer")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/battleaxe.png" "${VAR}.stock.battle_axe" _"<span color='{BOB_GREEN}'>Battle Axe</span>
<span size='small'>Blade melee weapon: +2 damage (Requires Axe Wielding)</span>
<span size='small'>Cost: ${VAR}.price.battle_axe</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.battle_axe greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.battle_axe}
	[then]
		{VARIABLE_OP {VAR}.stock.battle_axe add -1}
		{VARIABLE_OP inventory[$side_number].battle_axe add 1}
		{BOB_GOLD $side_number -${VAR}.price.battle_axe}
		{VARIABLE_OP shopper.gold add -${VAR}.price.battle_axe}
		{BOB_PRINT ("$character[$side_number].name has bought a battle axe")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/battleaxe-undead.png" "${VAR}.stock.thunder_axe" _"<span color='{BOB_GREEN}'>Thunder Axe</span>
<span size='small'>Blade melee weapon: Knockout, +1 damage (Requires Axe Wielding)</span>
<span size='small'>Cost: ${VAR}.price.thunder_axe</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.thunder_axe greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.thunder_axe}
	[then]
		{VARIABLE_OP {VAR}.stock.thunder_axe add -1}
		{VARIABLE_OP inventory[$side_number].thunder_axe add 1}
		{BOB_GOLD $side_number -${VAR}.price.thunder_axe}
		{VARIABLE_OP shopper.gold add -${VAR}.price.thunder_axe}
		{BOB_PRINT ("$character[$side_number].name has bought the Thunder Axe")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/pike.png" "${VAR}.stock.barbed_spear" _"<span color='{BOB_GREEN}'>Barbed Spear</span>
<span size='small'>Pierce melee weapon: +2 damage (Requires Spearmanship)</span>
<span size='small'>Cost: ${VAR}.price.barbed_spear</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.barbed_spear greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.barbed_spear}
	[then]
		{VARIABLE_OP {VAR}.stock.barbed_spear add -1}
		{VARIABLE_OP inventory[$side_number].barbed_spear add 1}
		{BOB_GOLD $side_number -${VAR}.price.barbed_spear}
		{VARIABLE_OP shopper.gold add -${VAR}.price.barbed_spear}
		{BOB_PRINT ("$character[$side_number].name has bought a barbed spear")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/spear-orcish.png" "${VAR}.stock.enchanted_spear" _"<span color='{BOB_GREEN}'>Enchanted Spear</span>
<span size='small'>Pierce melee weapon: Magical (Requires Spearmanship)</span>
<span size='small'>Cost: ${VAR}.price.enchanted_spear</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.enchanted_spear greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.enchanted_spear}
	[then]
		{VARIABLE_OP {VAR}.stock.enchanted_spear add -1}
		{VARIABLE_OP inventory[$side_number].enchanted_spear add 1}
		{BOB_GOLD $side_number -${VAR}.price.enchanted_spear}
		{VARIABLE_OP shopper.gold add -${VAR}.price.enchanted_spear}
		{BOB_PRINT ("$character[$side_number].name has bought an enchanted spear")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/weapons/lance.png" "${VAR}.stock.lance" _"<span color='{BOB_GREEN}'>Lance</span>
<span size='small'>Pierce melee weapon: Charge (Requires Spearmanship)</span>
<span size='small'>Cost: ${VAR}.price.lance</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.lance greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.lance}
	[then]
		{VARIABLE_OP {VAR}.stock.lance add -1}
		{VARIABLE_OP inventory[$side_number].lance add 1}
		{BOB_GOLD $side_number -${VAR}.price.lance}
		{VARIABLE_OP shopper.gold add -${VAR}.price.lance}
		{BOB_PRINT ("$character[$side_number].name has bought a lance")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/staff-elven.png" "${VAR}.stock.ice_rod" _"<span color='{BOB_GREEN}'>Ice Rod</span>
<span size='small'>Cold melee weapon: Magical, +2 damage (Requires Staff Wielding)</span>
<span size='small'>Cost: ${VAR}.price.ice_rod</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.ice_rod greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.ice_rod}
	[then]
		{VARIABLE_OP {VAR}.stock.ice_rod add -1}
		{VARIABLE_OP inventory[$side_number].ice_rod add 1}
		{BOB_GOLD $side_number -${VAR}.price.ice_rod}
		{VARIABLE_OP shopper.gold add -${VAR}.price.ice_rod}
		{BOB_PRINT ("$character[$side_number].name has bought the Ice Rod")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/staff-plague.png" "${VAR}.stock.plague_staff" _"<span color='{BOB_GREEN}'>Plague Staff</span>
<span size='small'>Cold melee weapon: Plague, -2 damage (Requires Staff Wielding)</span>
<span size='small'>Cost: ${VAR}.price.plague_staff</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.plague_staff greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.plague_staff}
	[then]
		{VARIABLE_OP {VAR}.stock.plague_staff add -1}
		{VARIABLE_OP inventory[$side_number].plague_staff add 1}
		{BOB_GOLD $side_number -${VAR}.price.plague_staff}
		{VARIABLE_OP shopper.gold add -${VAR}.price.plague_staff}
		{BOB_PRINT ("$character[$side_number].name has bought a plague staff")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/hammer-troll.png" "${VAR}.stock.smasher" _"<span color='{BOB_GREEN}'>Smasher</span>
<span size='small'>Impact melee weapon: Knockback, +2 damage (Requires Mace Wielding)</span>
<span size='small'>Cost: ${VAR}.price.smasher</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.smasher greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.smasher}
	[then]
		{VARIABLE_OP {VAR}.stock.smasher add -1}
		{VARIABLE_OP inventory[$side_number].smasher add 1}
		{BOB_GOLD $side_number -${VAR}.price.smasher}
		{VARIABLE_OP shopper.gold add -${VAR}.price.smasher}
		{BOB_PRINT ("$character[$side_number].name has bought the Smasher")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/dagger-orcish.png" "${VAR}.stock.nipper" _"<span color='{BOB_GREEN}'>Nipper</span>
<span size='small'>Blade melee weapon: +1 attacks (Requires Daggerplay)</span>
<span size='small'>Cost: ${VAR}.price.nipper</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.nipper greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.nipper}
	[then]
		{VARIABLE_OP {VAR}.stock.nipper add -1}
		{VARIABLE_OP inventory[$side_number].nipper add 1}
		{BOB_GOLD $side_number -${VAR}.price.nipper}
		{VARIABLE_OP shopper.gold add -${VAR}.price.nipper}
		{BOB_PRINT ("$character[$side_number].name has bought the Nipper")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

#####################
# Ranged
#####################

[option]
message= _ {MENU_IMG_TXT2 "attacks/bow-elven-magic.png" "${VAR}.stock.frost_bow" _"<span color='{BOB_GREEN}'>Frost Bow</span>
<span size='small'>Cold ranged weapon: +1 damage (Requires Bowmanship)</span>
<span size='small'>Cost: ${VAR}.price.frost_bow</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.frost_bow greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.frost_bow}
	[then]
		{VARIABLE_OP {VAR}.stock.frost_bow add -1}
		{VARIABLE_OP inventory[$side_number].frost_bow add 1}
		{BOB_GOLD $side_number -${VAR}.price.frost_bow}
		{VARIABLE_OP shopper.gold add -${VAR}.price.frost_bow}
		{BOB_PRINT ("$character[$side_number].name has bought a frost bow")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/bow-elven.png" "${VAR}.stock.storm_bow" _"<span color='{BOB_GREEN}'>Storm Bow</span>
<span size='small'>Pierce ranged weapon: +3 damage (Requires Bowmanship)</span>
<span size='small'>Cost: ${VAR}.price.storm_bow</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.storm_bow greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.storm_bow}
	[then]
		{VARIABLE_OP {VAR}.stock.storm_bow add -1}
		{VARIABLE_OP inventory[$side_number].storm_bow add 1}
		{BOB_GOLD $side_number -${VAR}.price.storm_bow}
		{VARIABLE_OP shopper.gold add -${VAR}.price.storm_bow}
		{BOB_PRINT ("$character[$side_number].name has bought the Storm Bow")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/weapons/fire-bow.png" "${VAR}.stock.fire_bow" _"<span color='{BOB_GREEN}'>Fire Bow</span>
<span size='small'>Fire ranged weapon (Requires Bowmanship)</span>
<span size='small'>Cost: ${VAR}.price.fire_bow</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.fire_bow greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.fire_bow}
	[then]
		{VARIABLE_OP {VAR}.stock.fire_bow add -1}
		{VARIABLE_OP inventory[$side_number].fire_bow add 1}
		{BOB_GOLD $side_number -${VAR}.price.fire_bow}
		{VARIABLE_OP shopper.gold add -${VAR}.price.fire_bow}
		{BOB_PRINT ("$character[$side_number].name has bought a fire bow")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/pick-axe.png" "${VAR}.stock.tomahawk" _"<span color='{BOB_GREEN}'>Tomahawk</span>
<span size='small'>Blade ranged weapon: Sureflight, +1 damage (Requires Hatcheteering)</span>
<span size='small'>Cost: ${VAR}.price.tomahawk</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.tomahawk greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.tomahawk}
	[then]
		{VARIABLE_OP {VAR}.stock.tomahawk add -1}
		{VARIABLE_OP inventory[$side_number].tomahawk add 1}
		{BOB_GOLD $side_number -${VAR}.price.tomahawk}
		{VARIABLE_OP shopper.gold add -${VAR}.price.tomahawk}
		{BOB_PRINT ("$character[$side_number].name has bought a tomahawk")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "inventory/weapons/feathered-javelin.png" "${VAR}.stock.feathered_javelin" _"<span color='{BOB_GREEN}'>Feathered Javelin</span>
<span size='small'>Pierce ranged weapon: Sureflight (Requires Javelineering)</span>
<span size='small'>Cost: ${VAR}.price.feathered_javelin</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.feathered_javelin greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.feathered_javelin}
	[then]
		{VARIABLE_OP {VAR}.stock.feathered_javelin add -1}
		{VARIABLE_OP inventory[$side_number].feathered_javelin add 1}
		{BOB_GOLD $side_number -${VAR}.price.feathered_javelin}
		{VARIABLE_OP shopper.gold add -${VAR}.price.feathered_javelin}
		{BOB_PRINT ("$character[$side_number].name has bought a feathered javelin")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/crossbow-orcish.png" "${VAR}.stock.heavy_crossbow" _"<span color='{BOB_GREEN}'>Heavy Crossbow</span>
<span size='small'>Pierce ranged weapon: +3 damage (Requires Crossbowmanship)</span>
<span size='small'>Cost: ${VAR}.price.heavy_crossbow</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.heavy_crossbow greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.heavy_crossbow}
	[then]
		{VARIABLE_OP {VAR}.stock.heavy_crossbow add -1}
		{VARIABLE_OP inventory[$side_number].heavy_crossbow add 1}
		{BOB_GOLD $side_number -${VAR}.price.heavy_crossbow}
		{VARIABLE_OP shopper.gold add -${VAR}.price.heavy_crossbow}
		{BOB_PRINT ("$character[$side_number].name has bought a heavy crossbow")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[option]
message= _ {MENU_IMG_TXT2 "attacks/sling.png" "${VAR}.stock.customised_sling" _"<span color='{BOB_GREEN}'>Customised Sling</span>
<span size='small'>Impact ranged weapon: +1 damage (Requires Slingmanship)</span>
<span size='small'>Cost: ${VAR}.price.customised_sling</span>"}
[show_if]
	{BOB_CONDITION {VAR}.stock.customised_sling greater_than_equal_to 1}
	[/show_if]
[command]
[if]
	{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.customised_sling}
	[then]
		{VARIABLE_OP {VAR}.stock.customised_sling add -1}
		{VARIABLE_OP inventory[$side_number].customised_sling add 1}
		{BOB_GOLD $side_number -${VAR}.price.customised_sling}
		{VARIABLE_OP shopper.gold add -${VAR}.price.heavy_crossbow}
		{BOB_PRINT ("$character[$side_number].name has bought a customised sling")}
		{BOB_REDRAW}
	[/then]
[/if]
[/command]
[/option]

[/message]
[/do]
[/while]
[/event]
#enddef

####################################################################################
# Place shop on leader
####################################################################################

# This is used in the competitive mode

#define BOB_PLACE_SHOP_ON_LEADER SIDE
	[store_side]
		side={SIDE}
		variable=side
	[/store_side]
	[if]
		[have_unit]
			side={SIDE}
			canrecruit=yes
		[/have_unit]
		{BOB_CONDITION side.controller equals human}
		[then]
			[store_starting_location] 
				side={SIDE}
				variable=location
			[/store_starting_location]
			{VARIABLE shop_{SIDE}.x $location.x}
			{VARIABLE shop_{SIDE}.y $location.y}
			{BOB_PLACE_GENERIC_SHOP Shop (shop_{SIDE}) scenery/tent-fancy-red.png $shop_{SIDE}.x $shop_{SIDE}.y}
			{CLEAR_VARIABLE location}
		[/then]
	[/if]
#enddef