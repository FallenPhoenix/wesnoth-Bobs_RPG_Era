#textdomain wesnoth-Bobs_RPG_Era
{~add-ons/Bobs_RPG_Era/files/misc_macros.cfg}

####################################################################################
# Setting Prices
####################################################################################

#define BOB_DEFINE_GLOBAL_PRICES
# Traps
{VARIABLE global_price.bomb 3}
{VARIABLE global_price.poison 4}
{VARIABLE global_price.net 5}
# Potions
{VARIABLE global_price.health_potion 3}
{VARIABLE global_price.endurance_potion 6}
{VARIABLE global_price.stamina_potion 12}
{VARIABLE global_price.life_potion 10}
{VARIABLE global_price.brainhaste_tonic 9}
{VARIABLE global_price.mind_juice 15}
{VARIABLE global_price.antidote 7}
{VARIABLE global_price.speed_serum 8}
{VARIABLE global_price.energy_cocktail 11}
{VARIABLE global_price.bloodlust_bile 14}
{VARIABLE global_price.frenzy_fluid 13}
# Raw Materials
{VARIABLE global_price.huanti_leaves 1}
{VARIABLE global_price.slime 2}
{VARIABLE global_price.ulox_rock 3}
{VARIABLE global_price.scorpion_tail 4}
{VARIABLE global_price.yoll_tree_bark 5}
{VARIABLE global_price.gold_nugget 6}
{VARIABLE global_price.fang 4}
{VARIABLE global_price.clay 2}
{VARIABLE global_price.lizard_tail 4}
{VARIABLE global_price.dragon_tail 20}
# Misc Items
{VARIABLE global_price.walking_boots 14}
{VARIABLE global_price.elven_boots 27}
{VARIABLE global_price.nim_boots 30}
{VARIABLE global_price.snow_shoes 12}
{VARIABLE global_price.map 5}
{VARIABLE global_price.tent 8}
{VARIABLE global_price.magic_bean 4}
{VARIABLE global_price.suicide_bomb 13}
{VARIABLE global_price.tongue_of_mockery 18}
{VARIABLE global_price.unlit_lantern 17}
# Jewellery
{VARIABLE global_price.ring_of_swiftness 16}
{VARIABLE global_price.fire_ring 20}
{VARIABLE global_price.sky_ring 20}
{VARIABLE global_price.water_ring 20}
{VARIABLE global_price.earth_ring 20}
{VARIABLE global_price.gold_ring 5}
# Weapons: Grade A (46-50g)
{VARIABLE global_price.ice_rod 50}
{VARIABLE global_price.enchanted_spear 49}
{VARIABLE global_price.lance 49}
{VARIABLE global_price.slayer 48}
{VARIABLE global_price.thunder_axe 48}
{VARIABLE global_price.smasher 48}
{VARIABLE global_price.nipper 46}
# Weapons: Grade B (41-45g)
{VARIABLE global_price.salamander_blade 45}
{VARIABLE global_price.plague_staff 45}
{VARIABLE global_price.storm_bow 43}
{VARIABLE global_price.heavy_crossbow 42}
# Weapons: Grade C (36-40g)
{VARIABLE global_price.tomahawk 40}
{VARIABLE global_price.battle_axe 38}
{VARIABLE global_price.barbed_spear 38}
{VARIABLE global_price.frost_bow 36}
# Weapons: Grade D (31-35g)
{VARIABLE global_price.feathered_javelin 35}
{VARIABLE global_price.customised_sling 34}
{VARIABLE global_price.fire_bow 32}
{VARIABLE global_price.holy_sword 31}
#enddef

#define BOB_DEFINE_LOCAL_PRICES VAR
{VARIABLE {VAR}.price.bomb $global_price.bomb}
{VARIABLE {VAR}.price.net $global_price.net}
{VARIABLE {VAR}.price.poison $global_price.poison}

{VARIABLE {VAR}.price.health_potion $global_price.health_potion}
{VARIABLE {VAR}.price.endurance_potion $global_price.endurance_potion}
{VARIABLE {VAR}.price.stamina_potion $global_price.stamina_potion}
{VARIABLE {VAR}.price.life_potion $global_price.life_potion}

{VARIABLE {VAR}.price.brainhaste_tonic $global_price.brainhaste_tonic}
{VARIABLE {VAR}.price.mind_juice $global_price.mind_juice}

{VARIABLE {VAR}.price.antidote $global_price.antidote}
{VARIABLE {VAR}.price.speed_serum $global_price.speed_serum}
{VARIABLE {VAR}.price.energy_cocktail $global_price.energy_cocktail}
{VARIABLE {VAR}.price.bloodlust_bile $global_price.bloodlust_bile}
{VARIABLE {VAR}.price.frenzy_fluid $global_price.frenzy_fluid}

{VARIABLE {VAR}.price.clay $global_price.clay}
{VARIABLE {VAR}.price.slime $global_price.slime}
{VARIABLE {VAR}.price.gold_nugget $global_price.gold_nugget}
{VARIABLE {VAR}.price.ulox_rock $global_price.ulox_rock}
{VARIABLE {VAR}.price.huanti_leaves $global_price.huanti_leaves}
{VARIABLE {VAR}.price.yoll_tree_bark $global_price.yoll_tree_bark}
{VARIABLE {VAR}.price.fang $global_price.fang}
{VARIABLE {VAR}.price.scorpion_tail $global_price.scorpion_tail}
{VARIABLE {VAR}.price.lizard_tail $global_price.lizard_tail}
{VARIABLE {VAR}.price.dragon_tail $global_price.dragon_tail}

{VARIABLE {VAR}.price.walking_boots $global_price.walking_boots}
{VARIABLE {VAR}.price.elven_boots $global_price.elven_boots}
{VARIABLE {VAR}.price.nim_boots $global_price.nim_boots}
{VARIABLE {VAR}.price.snow_shoes $global_price.snow_shoes}
{VARIABLE {VAR}.price.map $global_price.map}
{VARIABLE {VAR}.price.magic_bean $global_price.magic_bean}
{VARIABLE {VAR}.price.tent $global_price.tent}
{VARIABLE {VAR}.price.suicide_bomb $global_price.suicide_bomb}
{VARIABLE {VAR}.price.tongue_of_mockery $global_price.tongue_of_mockery}
{VARIABLE {VAR}.price.unlit_lantern $global_price.unlit_lantern}

{VARIABLE {VAR}.price.ring_of_swiftness $global_price.ring_of_swiftness}
{VARIABLE {VAR}.price.fire_ring $global_price.fire_ring}
{VARIABLE {VAR}.price.sky_ring $global_price.sky_ring}
{VARIABLE {VAR}.price.water_ring $global_price.water_ring}
{VARIABLE {VAR}.price.earth_ring $global_price.earth_ring}
{VARIABLE {VAR}.price.gold_ring $global_price.gold_ring}

{VARIABLE {VAR}.price.holy_sword $global_price.holy_sword}
{VARIABLE {VAR}.price.salamander_blade $global_price.salamander_blade}
{VARIABLE {VAR}.price.slayer $global_price.slayer}
{VARIABLE {VAR}.price.battle_axe $global_price.battle_axe}
{VARIABLE {VAR}.price.thunder_axe $global_price.thunder_axe}
{VARIABLE {VAR}.price.barbed_spear $global_price.barbed_spear}
{VARIABLE {VAR}.price.enchanted_spear $global_price.enchanted_spear}
{VARIABLE {VAR}.price.lance $global_price.lance}
{VARIABLE {VAR}.price.ice_rod $global_price.ice_rod}
{VARIABLE {VAR}.price.plague_staff $global_price.plague_staff}
{VARIABLE {VAR}.price.smasher $global_price.smasher}
{VARIABLE {VAR}.price.nipper $global_price.nipper}
{VARIABLE {VAR}.price.frost_bow $global_price.frost_bow}
{VARIABLE {VAR}.price.storm_bow $global_price.storm_bow}
{VARIABLE {VAR}.price.fire_bow $global_price.fire_bow}
{VARIABLE {VAR}.price.tomahawk $global_price.tomahawk}
{VARIABLE {VAR}.price.feathered_javelin $global_price.feathered_javelin}
{VARIABLE {VAR}.price.heavy_crossbow $global_price.heavy_crossbow}
{VARIABLE {VAR}.price.customised_sling $global_price.customised_sling}
#enddef

####################################################################################
# Generic Shops
####################################################################################

# These macros can be used to quickly place generic shops (without having to specify the shop's stock)
# An Apothecary stocks potions; a Market stocks raw materials and a few misc items; while an Armoury stocks weapons and traps
# Example: {BOB_PLACE_GENERIC_APOTHECARY "Tunisso Temple" tunisso_temple scenery/temple1.png 52 25}

#define BOB_PLACE_GENERIC_APOTHECARY NAME VAR IMAGE X Y
{VARIABLE {VAR}.stock.antidote 5}
{VARIABLE {VAR}.stock.health_potion 6}
{VARIABLE {VAR}.stock.stamina_potion 4}
{VARIABLE {VAR}.stock.endurance_potion 3}
{VARIABLE {VAR}.stock.life_potion 2}
{VARIABLE {VAR}.stock.brainhaste_tonic 3}
{VARIABLE {VAR}.stock.mind_juice 2}
{VARIABLE {VAR}.stock.speed_serum 3}
{VARIABLE {VAR}.stock.energy_cocktail 3}
{VARIABLE {VAR}.stock.frenzy_fluid 2}
{VARIABLE {VAR}.stock.bloodlust_bile 2}
{BOB_DEFINE_LOCAL_PRICES {VAR}}
{BOB_PLACE_SHOP ({NAME}) {VAR} {IMAGE} {X} {Y}}
#enddef

#define BOB_PLACE_GENERIC_MARKET NAME VAR IMAGE X Y
{VARIABLE {VAR}.stock.clay 5}
{VARIABLE {VAR}.stock.slime 6}
{VARIABLE {VAR}.stock.gold_nugget 3}
{VARIABLE {VAR}.stock.ulox_rock 4}
{VARIABLE {VAR}.stock.huanti_leaves 8}
{VARIABLE {VAR}.stock.yoll_tree_bark 4}
{VARIABLE {VAR}.stock.fang 4}
{VARIABLE {VAR}.stock.lizard_tail 3}
{VARIABLE {VAR}.stock.scorpion_tail 3}
{VARIABLE {VAR}.stock.snow_shoes 4}
{VARIABLE {VAR}.stock.unlit_lantern 2}
{VARIABLE {VAR}.stock.walking_boots 2}
{VARIABLE {VAR}.stock.magic_bean 3}
{VARIABLE {VAR}.stock.tent 1}
{VARIABLE {VAR}.stock.map 2}
{BOB_DEFINE_LOCAL_PRICES {VAR}}
{BOB_PLACE_SHOP ({NAME}) {VAR} {IMAGE} {X} {Y}}
#enddef

#define BOB_PLACE_GENERIC_ARMOURY NAME VAR IMAGE X Y
# Weapons: Melee
{VARIABLE {VAR}.stock.holy_sword 2}
{VARIABLE {VAR}.stock.salamander_blade 1}
{VARIABLE {VAR}.stock.slayer 1}
{VARIABLE {VAR}.stock.battle_axe 2}
{VARIABLE {VAR}.stock.thunder_axe 1}
{VARIABLE {VAR}.stock.barbed_spear 2}
{VARIABLE {VAR}.stock.enchanted_spear 1}
{VARIABLE {VAR}.stock.lance 1}
{VARIABLE {VAR}.stock.ice_rod 1}
{VARIABLE {VAR}.stock.plague_staff 1}
{VARIABLE {VAR}.stock.smasher 1}
{VARIABLE {VAR}.stock.nipper 1}
# Weapons: Ranged
{VARIABLE {VAR}.stock.frost_bow 1}
{VARIABLE {VAR}.stock.storm_bow 1}
{VARIABLE {VAR}.stock.fire_bow 2}
{VARIABLE {VAR}.stock.tomahawk 2}
{VARIABLE {VAR}.stock.feathered_javelin 2}
{VARIABLE {VAR}.stock.heavy_crossbow 2}
{VARIABLE {VAR}.stock.customised_sling 1}
# Traps
{VARIABLE {VAR}.stock.net 4}
{VARIABLE {VAR}.stock.bomb 4}
{VARIABLE {VAR}.stock.poison 4}
# Misc
{VARIABLE {VAR}.stock.suicide_bomb 5}
{BOB_DEFINE_LOCAL_PRICES {VAR}}
{BOB_PLACE_SHOP ({NAME}) {VAR} {IMAGE} {X} {Y}}
#enddef

#define BOB_PLACE_GENERIC_SHOP NAME VAR IMAGE X Y
# This is only really for the competitive mode shops
{VARIABLE {VAR}.stock.bomb 3}
{VARIABLE {VAR}.stock.poison 3}
{VARIABLE {VAR}.stock.net 3}
# Potions
{VARIABLE {VAR}.stock.health_potion 10}
{VARIABLE {VAR}.stock.endurance_potion 7}
{VARIABLE {VAR}.stock.stamina_potion 5}
{VARIABLE {VAR}.stock.life_potion 5}
{VARIABLE {VAR}.stock.brainhaste_tonic 7}
{VARIABLE {VAR}.stock.mind_juice 5}
{VARIABLE {VAR}.stock.antidote 10}
{VARIABLE {VAR}.stock.speed_serum 7}
{VARIABLE {VAR}.stock.energy_cocktail 5}
{VARIABLE {VAR}.stock.bloodlust_bile 5}
{VARIABLE {VAR}.stock.frenzy_fluid 5}
# Raw Materials
{VARIABLE {VAR}.stock.huanti_leaves 20}
{VARIABLE {VAR}.stock.slime 20}
{VARIABLE {VAR}.stock.ulox_rock 20}
{VARIABLE {VAR}.stock.scorpion_tail 15}
{VARIABLE {VAR}.stock.yoll_tree_bark 15}
{VARIABLE {VAR}.stock.gold_nugget 15}
{VARIABLE {VAR}.stock.fang 15}
{VARIABLE {VAR}.stock.clay 10}
{VARIABLE {VAR}.stock.lizard_tail 10}
{VARIABLE {VAR}.stock.dragon_tail 1}
# Misc Items
{VARIABLE {VAR}.stock.walking_boots 1}
{VARIABLE {VAR}.stock.elven_boots 1}
{VARIABLE {VAR}.stock.nim_boots 1}
{VARIABLE {VAR}.stock.snow_shoes 1}
{VARIABLE {VAR}.stock.map 2}
{VARIABLE {VAR}.stock.tent 1}
{VARIABLE {VAR}.stock.magic_bean 3}
{VARIABLE {VAR}.stock.suicide_bomb 5}
{VARIABLE {VAR}.stock.tongue_of_mockery 3}
{VARIABLE {VAR}.stock.unlit_lantern 1}
# Jewellery
{VARIABLE {VAR}.stock.ring_of_swiftness 1}
{VARIABLE {VAR}.stock.fire_ring 1}
{VARIABLE {VAR}.stock.sky_ring 1}
{VARIABLE {VAR}.stock.water_ring 1}
{VARIABLE {VAR}.stock.earth_ring 1}
{VARIABLE {VAR}.stock.gold_ring 0}
# Weapons: Melee
{VARIABLE {VAR}.stock.holy_sword 1}
{VARIABLE {VAR}.stock.salamander_blade 1}
{VARIABLE {VAR}.stock.slayer 1}
{VARIABLE {VAR}.stock.battle_axe 1}
{VARIABLE {VAR}.stock.thunder_axe 1}
{VARIABLE {VAR}.stock.barbed_spear 1}
{VARIABLE {VAR}.stock.enchanted_spear 1}
{VARIABLE {VAR}.stock.lance 1}
{VARIABLE {VAR}.stock.ice_rod 1}
{VARIABLE {VAR}.stock.plague_staff 1}
{VARIABLE {VAR}.stock.smasher 1}
{VARIABLE {VAR}.stock.nipper 1}
# Weapons: Ranged
{VARIABLE {VAR}.stock.frost_bow 1}
{VARIABLE {VAR}.stock.storm_bow 1}
{VARIABLE {VAR}.stock.fire_bow 1}
{VARIABLE {VAR}.stock.tomahawk 1}
{VARIABLE {VAR}.stock.feathered_javelin 1}
{VARIABLE {VAR}.stock.heavy_crossbow 1}
{VARIABLE {VAR}.stock.customised_sling 1}

{BOB_DEFINE_LOCAL_PRICES {VAR}}
{BOB_PLACE_SHOP ({NAME}) {VAR} {IMAGE} {X} {Y}}
#enddef

####################################################################################
# Manipulating individual shops
####################################################################################

# The stock and prices of each shop can be manipulated easily

# {VARIABLE_OP trindle_market.stock.bomb add 2} increases the number of bombs for sale in Trindle Market
# {VARIABLE_OP trindle_market.stock add 1} increases the number of all items for sale in Trindle Market

# {VARIABLE_OP tunisso_temple.price.slime add 5} increases the price of slime by 5g in Tunisso Temple
# {VARIABLE_OP tunisso_temple.price add 3} increases the price of all items by 3g in Tunisso Temple


####################################################################################
# The main shop macro
####################################################################################

# Helper macro for BOB_PLACE_SHOP

#define BOB_SHOP_ITEM VAR ID ICON NAME MSG_NAME DESCRIPTION DESCRIPTION_GREY ACTION
[option]
message= "&{ICON}=${VAR}.stock.{ID}=<span color='{BOB_GREEN}'>" + {NAME} + "</span>
<span size='small'>" + {DESCRIPTION} + "</span>
<span size='small'>" + _"shop^Cost: " + ${VAR}.price.{ID} + "</span><span size='small' color='{BOB_GREY}'> " + {DESCRIPTION_GREY} + "</span>"
[show_if]
	{BOB_CONDITION {VAR}.stock.{ID} greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION shopper.gold greater_than_equal_to ${VAR}.price.{ID}}
		[then]
			{VARIABLE_OP {VAR}.stock.{ID} add -1}
			{VARIABLE_OP inventory[$side_number].{ID} add 1}
			{VARIABLE_OP shopper.gold add -${VAR}.price.{ID}}
			{BOB_GOLD $side_number -${VAR}.price.{ID}}
			{ACTION}
			{VARIABLE item {MSG_NAME}}
			{BOB_PRINT_G _"$character[$side_number].name has bought $item|."
			      _"female^$character[$side_number].name has bought $item|."}
			{CLEAR_VARIABLE item}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]
#enddef

# The benefit of using the main shop macro is that you can directly specify which items it stocks

#define BOB_PLACE_SHOP NAME VAR IMAGE X Y

# Define local prices
[event]
	name="start"
	first_time_only=no
	{BOB_DEFINE_LOCAL_PRICES {VAR}}
[/event]

# Set image and label
[event]
	name="side turn"
	first_time_only=no
	[label]
		x,y={X},{Y}
		text={NAME}
	[/label]
	[item]
		x,y={X},{Y}
		image={IMAGE}
	[/item]
[/event]

# The event for entering the shop
[event]
	name=moveto
	first_time_only=no
	[filter]
		canrecruit=yes
		side=$side_number
		x,y={X},{Y}
		[filter_wml]
			[variables]
				character_status=active
			[/variables]
		[/filter_wml]
	[/filter]

	# Give shoppers 1 extra move so they don't block the hex
	[if]
		[have_unit]
			x,y=$x1,$y1
			[filter_wml]
				moves=0
			[/filter_wml]
		[/have_unit]
		[then]
			{BOB_STORE_UNIT side=$side_number canrecruit=yes {VARIABLE stored_unit.moves 1}}
		[/then]
	[/if]
	
# Define local prices again, in case they have been modified
{BOB_DEFINE_LOCAL_PRICES {VAR}}

[store_side]
	side=$side_number
	variable=shopper
[/store_side]
{VARIABLE dialog.shopping yes}
[while]
{BOB_CONDITION dialog.shopping equals yes}
[do]
	
[message]
	speaker=narrator
	image={IMAGE}
	caption={NAME}
	message= _ "What will you buy?"

[option]
message= {MENU_IMG_TXT2 "icons/blank-icon.png" " " _"Return To Game"}
[command]
	{CLEAR_VARIABLE dialog}
[/command]
[/option]
	

####################################################################################
# Traps
####################################################################################

# Bomb
{BOB_SHOP_ITEM {VAR} bomb inventory/misc_items/bomb.png _"Bomb" _"a Bomb" _"A trap that does 12 points of impact damage when stepped on" () ()}

# Poison
{BOB_SHOP_ITEM {VAR} poison inventory/misc_items/poison.png _"Poison" _"some Poison" _"A trap that poisons when stepped on" () ()}

# Net
{BOB_SHOP_ITEM {VAR} net inventory/misc_items/net.png _"Net" _"a Net" _"A trap that slows when stepped on" () ()}

####################################################################################
# Potions
####################################################################################

#####################
# Red
#####################

# Health Potion
{BOB_SHOP_ITEM {VAR} health_potion inventory/potions/health_potion.png _"Health Potion" _"a Health Potion" _"Restores 6 hitpoints" () ()}

# Endurance Potion
{BOB_SHOP_ITEM {VAR} endurance_potion inventory/potions/endurance_potion.png _"Endurance Potion" _"an Endurance Potion" _"Restores 10 hitpoints and adds 1 max hitpoint" () ()}

# Stamina Potion
{BOB_SHOP_ITEM {VAR} stamina_potion inventory/potions/stamina_potion.png _"Stamina Potion" _"a Stamina Potion" _"Adds 3 max hitpoints" () ()}

# Life Potion
{BOB_SHOP_ITEM {VAR} life_potion inventory/potions/life_potion.png _"Life Potion" _"a Life Potion" _"Restores 20 hitpoints" () ()}

#####################
# Purple
#####################

# Brainhaste Tonic
{BOB_SHOP_ITEM {VAR} brainhaste_tonic inventory/potions/brainhaste_tonic.png _"Brainhaste Tonic" _"a Brainhaste Tonic" _"Adds 4 experience" () ()}

# Mind Juice
{BOB_SHOP_ITEM {VAR} mind_juice inventory/potions/mind_juice.png _"Mind Juice" _"some Mind Juice" _"-3 max experience" () ()}

#####################
# Green
#####################

# Antidote
{BOB_SHOP_ITEM {VAR} antidote inventory/potions/antidote.png _"Antidote" _"an Antidote" _"Cures poison" () ()}

# Speed Serum
{BOB_SHOP_ITEM {VAR} speed_serum inventory/potions/speed_serum.png _"Speed Serum" _"some Speed Serum" _"Restores moves but poisons your metabolism" () ()}

#####################
# Blue
#####################

# Energy Cocktail
{BOB_SHOP_ITEM {VAR} energy_cocktail inventory/potions/energy_cocktail.png _"Energy Cocktail" _"an Energy Cocktail" _"Restores moves after next combat" () ()}

# Bloodlust Bile
{BOB_SHOP_ITEM {VAR} bloodlust_bile inventory/potions/bloodlust_bile.png _"Bloodlust Bile" _"some Bloodlust Bile" _"If you kill an enemy when you next enter combat, you can attack again" () ()}

# Frenzy Fluid
{BOB_SHOP_ITEM {VAR} frenzy_fluid inventory/potions/frenzy_fluid.png _"Frenzy Fluid" _"some Frenzy Fluid" _"Your next combat will last two rounds" () ()}

####################################################################################
# Raw Materials
####################################################################################

# Clay
{BOB_SHOP_ITEM {VAR} clay attacks/mud-glob.png _"Clay" _"some Clay" _"Raw material used in conjuring" () ()}

# Slime
{BOB_SHOP_ITEM {VAR} slime inventory/materials/slime.png _"Slime" _"some Slime" _"Raw material used in weaponcraft, herbalism concoction and conjuring" () ()}

# Gold Nugget
{BOB_SHOP_ITEM {VAR} gold_nugget inventory/materials/gold_nugget.png _"Gold Nugget" _"a Gold Nugget" _"Raw material used in concoction" () ()}

# Ulox Rock
{BOB_SHOP_ITEM {VAR} ulox_rock inventory/materials/ulox_rock.png _"Ulox Rock" _"a Ulox Rock" _"Raw material used in weaponcraft, herbalism, traps and concoction" () ()}

# Huanti Leaves
{BOB_SHOP_ITEM {VAR} huanti_leaves inventory/materials/huanti_leaves.png _"Huanti Leaves" _"some Huanti Leaves" _"Raw material used in herbalism and concoction" () ()}

# Yoll Tree Bark
{BOB_SHOP_ITEM {VAR} yoll_tree_bark inventory/materials/yoll_tree_bark.png _"Yoll Tree Bark" _"some Yoll Tree Bark" _"Raw material used in herbalism, traps, concoction and conjuring" () ()}

# Fang
{BOB_SHOP_ITEM {VAR} fang inventory/materials/fang.png _"Fang" _"a Fang" _"Raw material used in herbalism, concoction and conjuring" () ()}

# Lizard Tail
{BOB_SHOP_ITEM {VAR} lizard_tail inventory/materials/lizard_tail.png _"Lizard Tail" _"a Lizard Tail" _"Raw material used in conjuring" () ()}

# Scorpion Tail
{BOB_SHOP_ITEM {VAR} scorpion_tail inventory/materials/scorpion_tail.png _"Scorpion Tail" _"a Scorpion Tail" _"Raw material used in weaponcraft, herbalism, traps, concoction and conjuring" () ()}

# Dragon Tail
{BOB_SHOP_ITEM {VAR} dragon_tail inventory/materials/dragon_tail.png _"Dragon Tail" _"a Dragon Tail" _"Raw material used in herbalism and conjuring" () ()}

####################################################################################
# Misc Items
####################################################################################

# Walking Boots
{BOB_SHOP_ITEM {VAR} walking_boots inventory/misc_items/walking_boots.png _"Walking Boots" _"some Walking Boots" _"+1 movement" ()
	{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 1}
}

# Elven Boots
{BOB_SHOP_ITEM {VAR} elven_boots inventory/misc_items/elven_boots.png _"Elven Boots" _"some Elven Boots" _"+2 movement" ()
	{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 2}
}

# Nim Boots
{BOB_SHOP_ITEM {VAR} nim_boots inventory/misc_items/nim_boots.png _"Nim Boots" _"some Nim Boots" _"+10% defence on flat terrain" ()
		{BOB_MODIFY_SINGLE_DEFENCE x,y=$x1,$y1 flat -10}
}

# Snow Shoes
{BOB_SHOP_ITEM {VAR} snow_shoes inventory/misc_items/snow_shoes.png _"Snow Shoes" _"some Snow Shoes" _"Reduces movement cost on snow and ice by 1, but reduces movement by 1" () ()}

# Map
{BOB_SHOP_ITEM {VAR} map inventory/misc_items/map.png _"Map" _"a Map" _"Removes all shroud within 10 hexes" () ()}

# Magic Bean
{BOB_SHOP_ITEM {VAR} magic_bean inventory/misc_items/magic_bean.png _"Magic Bean" _"a Magic Bean" _"Converts grassland or savanna to great tree" () ()}

# Tent
{BOB_SHOP_ITEM {VAR} tent inventory/misc_items/tent.png _"Tent" _"a Tent" _"Creates temporary mini-village which heals +4HP each turn" () ()}

# Suicide Bomb
{BOB_SHOP_ITEM {VAR} suicide_bomb inventory/misc_items/suicide_bomb.png _"Suicide Bomb" _"a Suicide Bomb" _"Inflicts 10 impact damage on all adjacent units, including yourself" () ()}

# Tongue Of Mockery
{BOB_SHOP_ITEM {VAR} tongue_of_mockery inventory/misc_items/tongue_of_mockery.png _"Tongue Of Mockery" _"the Tongue Of Mockery" _"Sends all adjacent units into a mini-berserk frenzy" () ()}

# Lantern
{BOB_SHOP_ITEM {VAR} unlit_lantern inventory/misc_items/unlit_lantern.png _"Lantern" _"a Lantern" _"Gives the brightens ability: 10% lawful TOD bonus" () ()}


####################################################################################
# Rings
####################################################################################

# Ring of Swiftness
{BOB_SHOP_ITEM {VAR} ring_of_swiftness inventory/jewellery/gold_ring.png _"Ring of Swiftness" _"a Ring of Swiftness" _"+1 movement" ()
	{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 1}
}

# Fire Ring
{BOB_SHOP_ITEM {VAR} fire_ring inventory/jewellery/red_ring.png _"Fire Ring" _"a Fire Ring" _"+20% fire resistance" ()
	{BOB_MODIFY_RESISTANCE x=$x1 y=$y1 fire -20}
}

# Water Ring
{BOB_SHOP_ITEM {VAR} water_ring inventory/jewellery/blue_ring.png _"Water Ring" _"a Water Ring" _"+20% cold resistance" ()
	{BOB_MODIFY_RESISTANCE x=$x1 y=$y1 cold -20}
}

# Sky Ring
{BOB_SHOP_ITEM {VAR} sky_ring inventory/jewellery/white_ring.png _"Sky Ring" _"a Sky Ring" _"+20% arcane resistance" ()
	{BOB_MODIFY_RESISTANCE x=$x1 y=$y1 arcane -20}
}

# Earth Ring
{BOB_SHOP_ITEM {VAR} earth_ring inventory/jewellery/brown_ring.png _"Earth Ring" _"an Earth Ring" _"+20% impact resistance" ()
	{BOB_MODIFY_RESISTANCE x=$x1 y=$y1 impact -20}
}

# Gold Ring
{BOB_SHOP_ITEM {VAR} gold_ring inventory/jewellery/gold_ring.png _"Gold Ring" _"a Gold Ring" _"No special properties" () ()}

####################################################################################
# Weapons
####################################################################################

#####################
# Melee
#####################

# Holy Sword
{BOB_SHOP_ITEM {VAR} holy_sword attacks/sword-holy.png
	_"Holy Sword" _"a Holy Sword" _"Arcane melee weapon" _" (Requires Swordsmanship)" ()}

# Salamander Blade
{BOB_SHOP_ITEM {VAR} salamander_blade attacks/sword-flaming.png
	_"Salamander Blade" _"the Salamander Blade" _"Fire melee weapon: +3 damage" _" (Requires Swordsmanship)" ()}

# Slayer
{BOB_SHOP_ITEM {VAR} slayer attacks/greatsword-orcish.png
	_"Slayer" _"a Slayer" _"Blade melee weapon: Dread, +1 damage" _" (Requires Swordsmanship)" ()}

# Battle Axe
{BOB_SHOP_ITEM {VAR} battle_axe attacks/battleaxe.png
	_"Battle Axe" _"a Battle Axe" _"Blade melee weapon: +2 damage" _" (Requires Axe Wielding)" ()}

# Thunder Axe
{BOB_SHOP_ITEM {VAR} thunder_axe attacks/battleaxe-undead.png
	_"Thunder Axe" _"a Thunder Axe" _"Blade melee weapon: Knockout, +1 damage" _" (Requires Axe Wielding)" ()}

# Barbed Spear
{BOB_SHOP_ITEM {VAR} barbed_spear attacks/pike.png
	_"Barbed Spear" _"a Barbed Spear" _"Pierce melee weapon: +2 damage" _" (Requires Spearmanship)" ()}

# Enchanted Spear
{BOB_SHOP_ITEM {VAR} enchanted_spear attacks/spear-orcish.png
	_"Enchanted Spear" _"an Enchanted Spear" _"Pierce melee weapon: Magical" _" (Requires Spearmanship)" ()}

# Lance
{BOB_SHOP_ITEM {VAR} lance inventory/weapons/lance.png
	_"Lance" _"a Lance" _"Pierce melee weapon: Charge" _" (Requires Spearmanship)" ()}

# Ice Rod
{BOB_SHOP_ITEM {VAR} ice_rod attacks/staff-elven.png
	_"Ice Rod" _"the Ice Rod" _"Cold melee weapon: Magical, +2 damage" _" (Requires Staff Wielding)" ()}

# Plague Staff
{BOB_SHOP_ITEM {VAR} plague_staff attacks/staff-plague.png
	_"Plague Staff" _"a Plague Staff" _"Impact melee weapon: Plague" _" (Requires Staff Wielding)" ()}

# Smasher
{BOB_SHOP_ITEM {VAR} smasher attacks/hammer-troll.png
	_"Smasher" _"a Smasher" _"Impact melee weapon: Knockback, +2 damage" _" (Requires Mace Wielding)" ()}

# Nipper
{BOB_SHOP_ITEM {VAR} nipper attacks/dagger-orcish.png
	_"Nipper" _"the Nipper" _"Blade melee weapon: +1 attacks" _" (Requires Daggerplay)" ()}

#####################
# Ranged
#####################

# Frost Bow
{BOB_SHOP_ITEM {VAR} frost_bow attacks/bow-elven-magic.png
	_"Frost Bow" _"a Frost Bow" _"Cold ranged weapon: +1 damage" _" (Requires Bowmanship)" ()}

# Storm Bow
{BOB_SHOP_ITEM {VAR} storm_bow attacks/bow-elven.png
	_"Storm Bow" _"a Storm Bow" _"Pierce ranged weapon: +3 damage" _" (Requires Bowmanship)" ()}

# Fire Bow
{BOB_SHOP_ITEM {VAR} fire_bow inventory/weapons/fire-bow.png
	_"Fire Bow" _"a Fire Bow" _"Fire ranged weapon" _" (Requires Bowmanship)" ()}

# Tomahawk
{BOB_SHOP_ITEM {VAR} tomahawk attacks/pick-axe.png
	_"Tomahawk" _"a Tomahawk" _"Blade ranged weapon: Sureflight, +1 damage" _" (Requires Hatcheteering)" ()}

# Feathered Javelin
{BOB_SHOP_ITEM {VAR} feathered_javelin inventory/weapons/feathered-javelin.png
	_"Feathered Javelin" _"a Feathered Javelin" _"Pierce ranged weapon: Sureflight" _" (Requires Javelineering)" ()}

# Heavy Crossbow
{BOB_SHOP_ITEM {VAR} heavy_crossbow attacks/crossbow-orcish.png
	_"Heavy Crossbow" _"a Heavy Crossbow" _"Pierce ranged weapon: +3 damage" _" (Requires Crossbowmanship)" ()}

# Customised Sling
{BOB_SHOP_ITEM {VAR} customised_sling attacks/sling.png
	_"Customised Sling" _"a Customised Sling" _"Impact ranged weapon: +1 damage" _" (Requires Slingmanship)" ()}

[/message]
[/do]
[/while]
[/event]
#enddef

####################################################################################
# Place shop on leader
####################################################################################

# This is used in the competitive mode

#define BOB_PLACE_SHOP_ON_LEADER SIDE
[store_side]
	side={SIDE}
	variable=side
[/store_side]
[if]
	[have_unit]
		side={SIDE}
		canrecruit=yes
	[/have_unit]
	{BOB_CONDITION side.controller equals human}
	[then]
		[store_starting_location] 
			side={SIDE}
			variable=location
		[/store_starting_location]
		{VARIABLE shop_{SIDE}.x $location.x}
		{VARIABLE shop_{SIDE}.y $location.y}
		{BOB_PLACE_GENERIC_SHOP Shop (shop_{SIDE}) scenery/tent-fancy-red.png $shop_{SIDE}.x $shop_{SIDE}.y}
		{CLEAR_VARIABLE location}
	[/then]
[/if]
#enddef