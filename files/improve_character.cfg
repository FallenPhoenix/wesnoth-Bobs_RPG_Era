#textdomain wesnoth-Bobs_RPG_Era

#define BOB_IMPROVE_CHARACTER
{VARIABLE dialog.improve_character yes}
[while]
{BOB_CONDITION dialog.improve_character equals yes}
[do]
[message]
	speaker=narrator
	image=wesnoth-icon.png
	caption=_ "caption^Improve Character"
	message= _ "You have $character[$side_number].character_points character points to spend."

[option]
message= {MENU_IMG_TXT "icons/blank-icon.png" _"Return To Game"}
[command]
	{CLEAR_VARIABLE dialog}
	{BOB_REDRAW}
	[if]
		{BOB_CONDITION character[$side_number].character_points less_than 10}
		[then]
			{BOB_REMOVE_OVERLAY $x1 $y1 misc/cp-overlay.png}
		[/then]
	[/if]
[/command]
[/option]

####################################################################################
# Classes
####################################################################################

[option]
message= "&icons/blank-icon.png=<span color='{BOB_GREEN}'>" + _"CLASSES" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level not_equals 4}
	{BOB_CONDITION character[$side_number].ranger_level not_equals 4}
	{BOB_CONDITION character[$side_number].vagabond_level not_equals 4}
	{BOB_CONDITION character[$side_number].magician_level not_equals 4}
[/show_if]
[command]
[/command]
[/option]

#####################
# Warrior
#####################

[option]
message= "&icons/warrior.png=<span color='{BOB_GREEN}'>" + _"Advance To Novice Warrior" + "</span>
<span size='small'>" + _"Allows: Power, Stamina, React." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level numerical_equals 0}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].warrior_level 1}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_stamina add 1}
			{VARIABLE_OP character[$side_number].perk_power add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/warrior.png=<span color='{BOB_GREEN}'>" + _"Advance To Experienced Warrior" + "</span>
<span size='small'>" + _"Allows: Power, Stamina, Robust, Inspire, Deft, Attack." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level numerical_equals 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].warrior_level 2}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_stamina add 1}
			{VARIABLE_OP character[$side_number].perk_power add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/warrior.png=<span color='{BOB_GREEN}'>" + _"Advance To Veteran Warrior" + "</span>
<span size='small'>" + _"Allows: Power, Stamina, Leadership, Tough, Lead, Counter, Blitz." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level numerical_equals 2}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].warrior_level 3}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_stamina add 1}
			{VARIABLE_OP character[$side_number].perk_power add 1}
			# Units with 4 melee strikes get an extra 'power' perk, since they upgrade in smaller steps
			[if]
				{BOB_CONDITION character[$side_number].melee_weapon_style numerical_equals 4}
				[then]
					{VARIABLE_OP character[$side_number].perk_power add 1}
				[/then]
			[/if]
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/warrior.png=<span color='{BOB_GREEN}'>" + _"Advance To Master Warrior" + "</span>
<span size='small'>" + _"Allows: Power, Stamina, Mentor, Marksman, Defend." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level numerical_equals 3}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].warrior_level 4}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_stamina add 1}
			{VARIABLE_OP character[$side_number].perk_power add 1}
			[if]
				{BOB_CONDITION character[$side_number].melee_weapon_style numerical_equals 4}
				[then]
					{VARIABLE_OP character[$side_number].perk_power add 1}
				[/then]
			[/if]
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Ranger
#####################

[option]
message= "&icons/ranger.png=<span color='{BOB_GREEN}'>" + _"Advance To Novice Ranger" + "</span>
<span size='small'>" + _"Allows: Accuracy, Hillsmanship, Woodsmanship, React." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level numerical_equals 0}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].ranger_level 1}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_accuracy add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "icons/ranger.png=<span color='{BOB_GREEN}'>" + _"Advance To Experienced Ranger" + "</span>
<span size='small'>" + _"Allows: Accuracy, Desert and Snow Trekking, Loner, Deft, Firststrike, Aim." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level numerical_equals 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].ranger_level 2}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_accuracy add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/ranger.png=<span color='{BOB_GREEN}'>" + _"Advance To Veteran Ranger" + "</span>
<span size='small'>" + _"Allows: Accuracy, Mountaineering, Swimming, Maverick, Counter, Quickfire." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level numerical_equals 2}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].ranger_level 3}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_accuracy add 1}
			# Units with 4 ranged-strikes get an extra 'accuracy' perk, since they upgrade in smaller steps
			[if]
				{BOB_CONDITION character[$side_number].ranged_weapon_style numerical_equals 4}
				[then]
					{VARIABLE_OP character[$side_number].perk_accuracy add 1}
				[/then]
			[/if]
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/ranger.png=<span color='{BOB_GREEN}'>" + _"Advance To Master Ranger" + "</span>
<span size='small'>" + _"Allows: Accuracy, Potholing, Marksman." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level numerical_equals 3}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].ranger_level 4}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_accuracy add 1}
			[if]
				{BOB_CONDITION character[$side_number].ranged_weapon_style numerical_equals 4}
				[then]
					{VARIABLE_OP character[$side_number].perk_accuracy add 1}
				[/then]
			[/if]
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Vagabond
#####################

[option]
message= "&icons/vagabond.png=<span color='{BOB_GREEN}'>" + _"Advance To Novice Vagabond" + "</span>
<span size='small'>" + _"Allows: Speed, Firststrike." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level numerical_equals 0}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].vagabond_level 1}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_speed add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/vagabond.png=<span color='{BOB_GREEN}'>" + _"Advance To Experienced Vagabond" + "</span>
<span size='small'>" + _"Allows: Speed, Conceal, Backstab, Dodge." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level numerical_equals 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].vagabond_level 2}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_speed add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/vagabond.png=<span color='{BOB_GREEN}'>" + _"Advance To Veteran Vagabond" + "</span>
<span size='small'>" + _"Allows: Speed, Hide, Distract." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level numerical_equals 2}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].vagabond_level 3}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_speed add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/vagabond.png=<span color='{BOB_GREEN}'>" + _"Advance To Master Vagabond" + "</span>
<span size='small'>" + _"Allows: Power, Speed, Stealth, Skirmish, Surprise." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level numerical_equals 3}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].vagabond_level 4}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_speed add 1}
			{VARIABLE_OP character[$side_number].perk_power add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Magician
#####################

[option]
message= "&icons/magician.png=<span color='{BOB_GREEN}'>" + _"Advance To Novice Magician" + "</span>
<span size='small'>" + _"Allows: Wisdom, Heals." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level numerical_equals 0}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].magician_level 1}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_wisdom add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/magician.png=<span color='{BOB_GREEN}'>" + _"Advance To Experienced Magician" + "</span>
<span size='small'>" + _"Allows: Wisdom, Heals, Scare." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level numerical_equals 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].magician_level 2}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_wisdom add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/magician.png=<span color='{BOB_GREEN}'>" + _"Advance To Veteran Magician" + "</span>
<span size='small'>" + _"Allows: Wisdom, Heals, Terrify, Blessed." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level numerical_equals 2}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].magician_level 3}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_wisdom add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/magician.png=<span color='{BOB_GREEN}'>" + _"Advance To Master Magician" + "</span>
<span size='small'>" + _"Allows: Accuracy, Wisdom, Heals, Illuminates/Darkens." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level numerical_equals 3}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].magician_level 4}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_wisdom add 1}
			{VARIABLE_OP character[$side_number].perk_accuracy add 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

####################################################################################
# Perks
####################################################################################

[option]
message= "&icons/blank-icon.png=<span color='{BOB_GREEN}'>" + _"PERKS" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].perk_power not_equals 0}
	{BOB_CONDITION character[$side_number].perk_accuracy not_equals 0}
	{BOB_CONDITION character[$side_number].perk_stamina not_equals 0}
	{BOB_CONDITION character[$side_number].perk_speed not_equals 0}
	{BOB_CONDITION character[$side_number].perk_wisdom not_equals 0}
	{BOB_CONDITION unit.variables.critical_chance less_than 50}
	[or]
		{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 1}
		{BOB_CONDITION character[$side_number].perk_power not_equals 0}
		{BOB_CONDITION character[$side_number].perk_accuracy not_equals 0}
		{BOB_CONDITION character[$side_number].perk_stamina not_equals 0}
		{BOB_CONDITION character[$side_number].perk_speed not_equals 0}
		{BOB_CONDITION character[$side_number].perk_wisdom not_equals 0}
		{BOB_CONDITION character[$side_number].perk_woodsmanship not_equals yes}
		{BOB_CONDITION character[$side_number].perk_hillsmanship not_equals yes}
		{BOB_CONDITION character[$side_number].perk_desert_trekking not_equals yes}
		{BOB_CONDITION character[$side_number].perk_snow_trekking not_equals yes}
		{BOB_CONDITION character[$side_number].perk_swimming not_equals yes}
		{BOB_CONDITION character[$side_number].perk_mountaineering not_equals yes}
		{BOB_CONDITION character[$side_number].perk_potholing not_equals yes}
	[/or]
[/show_if]
[command]
[/command]
[/option]

#####################
# Power
#####################

[option]
message= "&icons/dummy.png=<span color='{BOB_GREEN}'>" + _"Power" + "</span>
<span size='small'>" + _"Gives you +1 damage to your melee attack." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].melee_weapon_style numerical_equals 4}
	{BOB_CONDITION character[$side_number].perk_power greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -4}
			{VARIABLE_OP character[$side_number].perk_power add -1}
			{BOB_MODIFY_WEAPON melee damage 1 $character[$side_number].melee_weapon}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/dummy.png=<span color='{BOB_GREEN}'>" + _"Power" + "</span>
<span size='small'>" + _"Gives you +2 damage to your melee attack." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].melee_weapon_style numerical_equals 3}
	{BOB_CONDITION character[$side_number].perk_power greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_power add -1}
			{BOB_MODIFY_WEAPON melee damage 2 $character[$side_number].melee_weapon}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/dummy.png=<span color='{BOB_GREEN}'>" + _"Power" + "</span>
<span size='small'>" + _"Gives you +3 damage to your melee attack." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].melee_weapon_style numerical_equals 2}
	{BOB_CONDITION character[$side_number].perk_power greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_power add -1}
			{BOB_MODIFY_WEAPON melee damage 3 $character[$side_number].melee_weapon}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Accuracy
#####################

[option]
message= "&icons/target.png=<span color='{BOB_GREEN}'>" + _"Accuracy" + "</span>
<span size='small'>" + _"Gives you +1 damage to your ranged attack." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranged_weapon_style numerical_equals 4}
	{BOB_CONDITION character[$side_number].perk_accuracy greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -4}
			{VARIABLE_OP character[$side_number].perk_accuracy add -1}
			{BOB_MODIFY_WEAPON ranged damage 1 $character[$side_number].ranged_weapon}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/target.png=<span color='{BOB_GREEN}'>" + _"Accuracy" + "</span>
<span size='small'>" + _"Gives you +2 damage to your ranged attack." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranged_weapon_style numerical_equals 3}
	{BOB_CONDITION character[$side_number].perk_accuracy greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_accuracy add -1}
			{BOB_MODIFY_WEAPON ranged damage 2 $character[$side_number].ranged_weapon}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/target.png=<span color='{BOB_GREEN}'>" + _"Accuracy" + "</span>
<span size='small'>" + _"Gives you +3 damage to your ranged attack." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranged_weapon_style numerical_equals 2}
	{BOB_CONDITION character[$side_number].perk_accuracy greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_accuracy add -1}
			{BOB_MODIFY_WEAPON ranged damage 3 $character[$side_number].ranged_weapon}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/target.png=<span color='{BOB_GREEN}'>" + _"Accuracy" + "</span>
<span size='small'>" + _"Gives you +6 damage to your ranged attack." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranged_weapon_style numerical_equals 1}
	{BOB_CONDITION character[$side_number].perk_accuracy greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -6}
			{VARIABLE_OP character[$side_number].perk_accuracy add -1}
			{BOB_MODIFY_WEAPON ranged damage 6 $character[$side_number].ranged_weapon}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Stamina
#####################

[option]
message= "&icons/muscles.png=<span color='{BOB_GREEN}'>" + _"Stamina" + "</span>
<span size='small'>" + _"+4 max hitpoints." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].perk_stamina greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -4}
			{VARIABLE_OP character[$side_number].perk_stamina add -1}
			{BOB_MODIFY_HITPOINTS 4 no 4}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Speed
#####################

[option]
message= "&icons/speed.png=<span color='{BOB_GREEN}'>" + _"Speed" + "</span>
<span size='small'>" + _"+1 movement." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].perk_speed greater_than_equal_to 1}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -4}
			{VARIABLE_OP character[$side_number].perk_speed add -1}
			{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Wisdom
#####################

[option]
message= "&icons/scroll.png=<span color='{BOB_GREEN}'>" + _"Wisdom" + "</span>
<span size='small'>" + _"-3 max experience." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].perk_wisdom greater_than_equal_to 1}
[/show_if]
[command]
	{BOB_STORE ({VARIABLE temp_max_xp $stored.max_experience})}
	# Prevent potion making max xp too low
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		{BOB_CONDITION temp_max_xp greater_than_equal_to 13}
		[then]
			{VARIABLE_OP character[$side_number].character_points add -3}
			{VARIABLE_OP character[$side_number].perk_wisdom add -1}
			{BOB_MODIFY_EXPERIENCE -3}
			{BOB_REDRAW}
		[/then]
	[/if]
	{CLEAR_VARIABLE temp_max_xp}
[/command]
[/option]

#####################
# Critical Hit
#####################

[option]
message= "&icons/dice.png=<span color='{BOB_GREEN}'>" + _"Luck" + "</span>
<span size='small'>" + _"Increases the chance of scoring a critical hit by 1%." + "</span>
<span size='small'>" + _"skill_points^Cost: 1" + "</span>"
[show_if]
	{BOB_CONDITION unit.variables.critical_chance less_than_equal_to 50}
[/show_if]
[command]
	{BOB_STORE (
		[if]
			{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 1}
			{BOB_CONDITION stored.variables.critical_chance less_than 50}
			[then]
				{VARIABLE_OP stored.variables.critical_chance add 1}
				{VARIABLE_OP character[$side_number].character_points add -1}
				{BOB_REDRAW}
			[/then]
		[/if]
	)}
[/command]
[/option]

####################################################################################
# Movement Cost Perks
####################################################################################

#####################
# Hillsmanship
#####################

[option]
message= "&icons/hills.png=<span color='{BOB_GREEN}'>" + _"Hillsmanship" + "</span>
<span size='small'>" + _"Reduces movement cost on hills to 1." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].perk_hillsmanship not_equals yes}
	{BOB_CONDITION unit.race not_equals dwarf}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].perk_hillsmanship yes}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_MODIFY_MOVE_COSTS hills 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Woodsmanship
#####################

[option]
message= "&icons/forest.png=<span color='{BOB_GREEN}'>" + _"Woodsmanship" + "</span>
<span size='small'>" + _"Reduces movement cost in forests to 1." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].perk_woodsmanship not_equals yes}
	{BOB_CONDITION unit.race not_equals elf}
	{BOB_CONDITION unit.race not_equals dwarf}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].perk_woodsmanship yes}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_MODIFY_MOVE_COSTS forest 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Desert Trekking
#####################

[option]
message= "&icons/desert.png=<span color='{BOB_GREEN}'>" + _"Desert Trekking" + "</span>
<span size='small'>" + _"Reduces movement cost on sand to 1." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].perk_desert_trekking not_equals yes}
	{BOB_CONDITION unit.race not_equals dwarf}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].perk_desert_trekking yes}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_MODIFY_MOVE_COSTS sand 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Snow Trekking
#####################

[option]
message= "&icons/snow.png=<span color='{BOB_GREEN}'>" + _"Snow Trekking" + "</span>
<span size='small'>" + _"Reduces movement cost on snow and ice to 1." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].perk_snow_trekking not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].perk_snow_trekking yes}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_MODIFY_MOVE_COSTS frozen 1}
			# Removes snow shoes if worn
			[if]
				{BOB_CONDITION inventory[$side_number].snow_shoes_on equals yes}
				[then]
					{BOB_MODIFY_MOVEMENT x=$x1 y=$y1 1}
					{VARIABLE_OP inventory[$side_number].snow_shoes add 1}
					{CLEAR_VARIABLE inventory[$side_number].snow_shoes_on}
				[/then]
			[/if]
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Swimming
#####################

[option]
message= "&icons/water.png=<span color='{BOB_GREEN}'>" + _"Swimming" + "</span>
<span size='small'>" + _"Reduces movement cost in shallow water and swamp to 1." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].perk_swimming not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].perk_swimming yes}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_MODIFY_MOVE_COSTS shallow_water 1}
			{BOB_MODIFY_MOVE_COSTS swamp_water 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Mountaineering
#####################

[option]
message= "&icons/mountains.png=<span color='{BOB_GREEN}'>" + _"Mountaineering" + "</span>
<span size='small'>" + _"Reduces movement cost in mountains to 1." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].perk_mountaineering not_equals yes}
	{BOB_CONDITION unit.race not_equals dwarf}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].perk_mountaineering yes}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_MODIFY_MOVE_COSTS mountains 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Potholing
#####################

[option]
message= "&icons/cave.png=<span color='{BOB_GREEN}'>" + _"Potholing" + "</span>
<span size='small'>" + _"Reduces movement cost in caves to 1." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 4}
	{BOB_CONDITION character[$side_number].perk_potholing not_equals yes}
	{BOB_CONDITION unit.race not_equals dwarf}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].perk_potholing yes}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_MODIFY_MOVE_COSTS cave 1}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

####################################################################################
# Abilities
####################################################################################

[option]
message= "&icons/blank-icon.png=<span color='{BOB_GREEN}'>" + _"ABILITIES" + "</span>"
[command]
[/command]
[/option]

#####################
# Robust
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Robust" + "</span>
<span size='small'>" + _"+10% to resistances when defending." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].robust not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].robust yes}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_ADD_ABILITY ROBUST}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Tough
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Tough" + "</span>
<span size='small'>" + _"+20% to resistances when defending." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].robust equals yes}
	{BOB_CONDITION character[$side_number].tough not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].tough yes}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_REMOVE_ABILITY ROBUST}
			{BOB_ADD_ABILITY TOUGH}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Inspire
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Inspire" + "</span>
<span size='small'>" + _"Adjacent allied units fight better." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].inspire not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		[then]
			{VARIABLE character[$side_number].inspire yes}
			{VARIABLE_OP character[$side_number].character_points add -4}
			{BOB_ADD_ABILITY INSPIRE}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Lead
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Lead" + "</span>
<span size='small'>" + _"Adjacent allied units fight better." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].inspire equals yes}
	{BOB_CONDITION character[$side_number].lead not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].lead yes}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{BOB_REMOVE_ABILITY INSPIRE}
			{BOB_ADD_ABILITY LEAD}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Mentor
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Mentor" + "</span>
<span size='small'>" + _"Adjacent allied units gain experience whenever you make a kill." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 4}
	[have_unit]
		x,y=$x1,$y1
		[not]
			ability=mentor
		[/not]
	[/have_unit]
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].mentor yes}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_ADD_ABILITY MENTOR}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Loner
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Loner" + "</span>
<span size='small'>" + _"You do +10% attacking damage when not adjacent to an ally." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].loner not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].loner yes}
			{VARIABLE_OP character[$side_number].character_points add -6}
			[object]
				silent=yes
				duration=forever
				[filter]
					x=$x1
					y=$y1
				[/filter]
				[effect]
					apply_to=new_ability
					[abilities]
						{ABILITY_BOB_LONER}
					[/abilities]
				[/effect]
			[/object]
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Maverick
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Maverick" + "</span>
<span size='small'>" + _"You do +20% attacking damage when not adjacent to an ally." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].loner equals yes}
	{BOB_CONDITION character[$side_number].maverick not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].maverick yes}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_REMOVE_ABILITY BOB_LONER}
			[object]
				silent=yes
				duration=forever
				[filter]
					x=$x1
					y=$y1
				[/filter]
				[effect]
					apply_to=new_ability
					[abilities]
						{ABILITY_BOB_MAVERICK}
					[/abilities]
				[/effect]
			[/object]
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Conceal
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Conceal" + "</span>
<span size='small'>" + _"Allows you to hide in villages, undetected by enemies." + "</span>
<span size='small'>" + _"skill_points^Cost: 5" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].conceal not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 5}
		[then]
			{VARIABLE character[$side_number].conceal yes}
			{VARIABLE_OP character[$side_number].character_points add -5}
			{BOB_ADD_ABILITY CONCEAL}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Hide
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Hide" + "</span>
<span size='small'>" + _"Allows you to hide in forests and villages, undetected by enemies." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].conceal equals yes}
	{BOB_CONDITION character[$side_number].hide not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].hide yes}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{BOB_REMOVE_ABILITY CONCEAL}
			{BOB_ADD_ABILITY HIDE}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Stealth
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Stealth" + "</span>
<span size='small'>" + _"Allows you to hide in any terrain at night." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 4}
	{BOB_CONDITION character[$side_number].stealth not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].stealth yes}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_ADD_ABILITY STEALTH}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Distract
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Distract" + "</span>
<span size='small'>" + _"Negates Zones of Control for allies." + "</span>
<span size='small'>" + _"skill_points^Cost: 5" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].distract not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 5}
		[then]
			{VARIABLE character[$side_number].distract yes}
			{VARIABLE_OP character[$side_number].character_points add -5}
			{BOB_ADD_ABILITY DISTRACT}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Skirmish
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Skirmish" + "</span>
<span size='small'>" + _"Allows you to ignore all enemy Zones of Control." + "</span>
<span size='small'>" + _"skill_points^Cost: 9" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 4}
	{BOB_CONDITION character[$side_number].distract equals yes}
	{BOB_CONDITION character[$side_number].skirmish not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 9}
		[then]
			{VARIABLE character[$side_number].skirmish yes}
			{VARIABLE_OP character[$side_number].character_points add -9}
			{BOB_REMOVE_ABILITY DISTRACT}
			{BOB_ADD_ABILITY SKIRMISH}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Scare
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Scare" + "</span>
<span size='small'>" + _"Adjacent enemy units fight worse." + "</span>
<span size='small'>" + _"skill_points^Cost: 5" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].scare not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 5}
		[then]
			{VARIABLE character[$side_number].scare yes}
			{VARIABLE_OP character[$side_number].character_points add -5}
			{BOB_ADD_ABILITY SCARE}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Terrify
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Terrify" + "</span>
<span size='small'>" + _"Adjacent enemy units fight worse." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].scare equals yes}
	{BOB_CONDITION character[$side_number].terrify not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].terrify yes}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{BOB_REMOVE_ABILITY SCARE}
			{BOB_ADD_ABILITY TERRIFY}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Illuminates
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Illuminates" + "</span>
<span size='small'>" + _"Adjacent lawful units fight better, chaotic units fight worse." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 4}
	{BOB_CONDITION unit.alignment not_equals chaotic}
	{BOB_CONDITION character[$side_number].tod_ability not_equals illuminates}
	{BOB_CONDITION character[$side_number].tod_ability not_equals darkens}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].tod_ability illuminates}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_ADD_ABILITY ILLUMINATES}
			{BOB_STORE ({VARIABLE stored.halo halo/illuminates-aura.png})}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Darkens
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Darkens" + "</span>
<span size='small'>" + _"Adjacent chaotic units fight better, lawful units fight worse." + "</span>
<span size='small'>" + _"skill_points^Cost: 7" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 4}
	{BOB_CONDITION unit.alignment not_equals lawful}
	{BOB_CONDITION character[$side_number].tod_ability not_equals darkens}
	{BOB_CONDITION character[$side_number].tod_ability not_equals illuminates}
	# this is to disable it
	{BOB_CONDITION character[$side_number].bob not_equals bob}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 7}
		[then]
			{VARIABLE character[$side_number].tod_ability darkens}
			{VARIABLE_OP character[$side_number].character_points add -7}
			{BOB_ADD_ABILITY DARKENS}
			{BOB_STORE ({VARIABLE stored.halo halo/darkens-aura.png})}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Blessed
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Blessed" + "</span>
<span size='small'>" + _"You are automatically healed by 4 HP per turn." + "</span>
<span size='small'>" + _"skill_points^Cost: 7" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].blessed not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 7}
		[then]
			{VARIABLE character[$side_number].blessed yes}
			{VARIABLE_OP character[$side_number].character_points add -7}
			{BOB_ADD_ABILITY BLESSED}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Healing
#####################

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Heals +2" + "</span>
<span size='small'>" + _"Grants you the power to heal adjacent units 2 HP per turn." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].healing numerical_equals 0}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].healing 2}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_ADD_ABILITY HEALS_2}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Heals +4" + "</span>
<span size='small'>" + _"Grants you the power to heal adjacent units 4 HP per turn." + "</span>
<span size='small'>" + _"skill_points^Cost: 2" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].healing numerical_equals 2}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 2}
		[then]
			{VARIABLE character[$side_number].healing 4}
			{VARIABLE_OP character[$side_number].character_points add -2}
			{BOB_REMOVE_ABILITY HEALS_2}
			{BOB_ADD_ABILITY HEALS_4}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Heals +6" + "</span>
<span size='small'>" + _"Grants you the power to cure and heal adjacent units 6 HP per turn." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].healing numerical_equals 4}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].healing 6}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REMOVE_ABILITY HEALS_4}
			{BOB_ADD_ABILITY HEALS_6}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Heals +8" + "</span>
<span size='small'>" + _"Grants you the power to cure and heal adjacent units 8 HP per turn." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].healing numerical_equals 6}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].healing 8}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REMOVE_ABILITY HEALS_6}
			{BOB_ADD_ABILITY HEALS_8}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Heals +10" + "</span>
<span size='small'>" + _"Grants you the power to cure and heal adjacent units 10 HP per turn." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].healing numerical_equals 8}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		[then]
			{VARIABLE character[$side_number].healing 10}
			{VARIABLE_OP character[$side_number].character_points add -4}
			{BOB_REMOVE_ABILITY HEALS_8}
			{BOB_ADD_ABILITY HEALS_10}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&icons/general.png=<span color='{BOB_GREEN}'>" + _"Heals +12" + "</span>
<span size='small'>" + _"Grants you the power to cure and heal adjacent units 12 HP per turn." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].magician_level greater_than_equal_to 4}
	{BOB_CONDITION character[$side_number].healing numerical_equals 10}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		[then]
			{VARIABLE character[$side_number].healing 12}
			{VARIABLE_OP character[$side_number].character_points add -4}
			{BOB_REMOVE_ABILITY HEALS_10}
			{BOB_ADD_ABILITY HEALS_12}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

####################################################################################
# Weapon Specials
####################################################################################

[option]
message= "&icons/blank-icon.png=<span color='{BOB_GREEN}'>" + _"WEAPON SPECIALS" + "</span>"
[command]
[/command]
[/option]

#####################
# React
#####################

# Melee

[option]
message= "&$character[$side_number].melee_weapon_icon=<span color='{BOB_GREEN}'>" + _"React" + "</span>
<span size='small'>" + _"Your melee attack has at least a 50% cth when defending." + "</span>
<span size='small'>" + _"skill_points^Cost: 5" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].react_melee not_equals yes}
	{BOB_CONDITION character[$side_number].melee_weapon_special not_equals magical}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 5}
		[then]
			{VARIABLE character[$side_number].react_melee yes}
			{VARIABLE_OP character[$side_number].character_points add -5}
			{BOB_ADD_WEAPON_SPECIAL melee $character[$side_number].melee_weapon REACT}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

# Ranged

[option]
message= "&$character[$side_number].ranged_weapon_icon=<span color='{BOB_GREEN}'>" + _"React" + "</span>
<span size='small'>" + _"Your ranged attack has at least a 50% cth when defending." + "</span>
<span size='small'>" + _"skill_points^Cost: 5" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].react_ranged not_equals yes}
	{BOB_CONDITION character[$side_number].ranged_weapon_special not_equals magical}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 5}
		[then]
			{VARIABLE character[$side_number].react_ranged yes}
			{VARIABLE_OP character[$side_number].character_points add -5}
			{BOB_ADD_WEAPON_SPECIAL ranged $character[$side_number].ranged_weapon REACT}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Counter
#####################

# Melee

[option]
message= "&$character[$side_number].melee_weapon_icon=<span color='{BOB_GREEN}'>" + _"Counter" + "</span>
<span size='small'>" + _"Your melee attack has at least a 60% chance to hit when defending." + "</span>
<span size='small'>" + _"skill_points^Cost: 7" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].counter_melee not_equals yes}
	{BOB_CONDITION character[$side_number].react_melee equals yes}
	{BOB_CONDITION character[$side_number].melee_weapon_special not_equals magical}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 7}
		[then]
			{VARIABLE character[$side_number].counter_melee yes}
			{VARIABLE_OP character[$side_number].character_points add -7}
			{BOB_REMOVE_WEAPON_SPECIAL melee $character[$side_number].melee_weapon react}
			{BOB_ADD_WEAPON_SPECIAL melee $character[$side_number].melee_weapon COUNTER}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

# Ranged

[option]
message= "&$character[$side_number].ranged_weapon_icon=<span color='{BOB_GREEN}'>" + _"Counter" + "</span>
<span size='small'>" + _"Your ranged attack has at least a 60% cth when defending." + "</span>
<span size='small'>" + _"skill_points^Cost: 7" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].counter_ranged not_equals yes}
	{BOB_CONDITION character[$side_number].react_ranged equals yes}
	{BOB_CONDITION character[$side_number].ranged_weapon_special not_equals magical}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 7}
		[then]
			{VARIABLE character[$side_number].counter_ranged yes}
			{VARIABLE_OP character[$side_number].character_points add -7}
			{BOB_REMOVE_WEAPON_SPECIAL ranged $character[$side_number].ranged_weapon react}
			{BOB_ADD_WEAPON_SPECIAL ranged $character[$side_number].ranged_weapon COUNTER}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Deft
#####################

# Melee

[option]
message= "&$character[$side_number].melee_weapon_icon=<span color='{BOB_GREEN}'>" + _"Deft" + "</span>
<span size='small'>" + _"Your melee attack has at least a 50% cth when attacking." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].deft_melee not_equals yes}
	{BOB_CONDITION character[$side_number].melee_weapon_special not_equals magical}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].deft_melee yes}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{BOB_ADD_WEAPON_SPECIAL melee $character[$side_number].melee_weapon DEFT}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

# Ranged

[option]
message= "&$character[$side_number].ranged_weapon_icon=<span color='{BOB_GREEN}'>" + _"Deft" + "</span>
<span size='small'>" + _"Your ranged attack has at least a 50% cth when attacking." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].deft_ranged not_equals yes}
	{BOB_CONDITION character[$side_number].ranged_weapon_special not_equals magical}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].deft_ranged yes}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{BOB_ADD_WEAPON_SPECIAL ranged $character[$side_number].ranged_weapon DEFT}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Marksmanship
#####################

# Melee

[option]
message= "&$character[$side_number].melee_weapon_icon=<span color='{BOB_GREEN}'>" + _"Marksman" + "</span>
<span size='small'>" + _"Your melee attack has at least a 60% cth when attacking." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 4}
	{BOB_CONDITION character[$side_number].marksman_melee not_equals yes}
	{BOB_CONDITION character[$side_number].deft_melee equals yes}
	{BOB_CONDITION character[$side_number].melee_weapon_special not_equals magical}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].marksman_melee yes}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_REMOVE_WEAPON_SPECIAL melee $character[$side_number].melee_weapon deft}
			{BOB_ADD_WEAPON_SPECIAL melee $character[$side_number].melee_weapon MARKSMAN}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

# Ranged

[option]
message= "&$character[$side_number].ranged_weapon_icon=<span color='{BOB_GREEN}'>" + _"Marksman" + "</span>
<span size='small'>" + _"Your ranged attack has at least a 60% cth when attacking." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 4}
	{BOB_CONDITION character[$side_number].marksman_ranged not_equals yes}
	{BOB_CONDITION character[$side_number].deft_ranged equals yes}
	{BOB_CONDITION character[$side_number].ranged_weapon_special not_equals magical}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].marksman_ranged yes}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_REMOVE_WEAPON_SPECIAL ranged $character[$side_number].ranged_weapon deft}
			{BOB_ADD_WEAPON_SPECIAL ranged $character[$side_number].ranged_weapon MARKSMAN}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Firststrike
#####################

[option]
message= "&$character[$side_number].melee_weapon_icon=<span color='{BOB_GREEN}'>" + _"Firststrike" + "</span>
<span size='small'>" + _"Your melee attack always strikes first when defending." + "</span>
<span size='small'>" + _"skill_points^Cost: 5" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 1}
	{BOB_CONDITION character[$side_number].firststrike_melee not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 5}
		[then]
			{VARIABLE character[$side_number].firststrike_melee yes}
			{VARIABLE_OP character[$side_number].character_points add -5}
			{BOB_ADD_WEAPON_SPECIAL melee $character[$side_number].melee_weapon FIRSTSTRIKE}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[option]
message= "&$character[$side_number].ranged_weapon_icon=<span color='{BOB_GREEN}'>" + _"Firststrike" + "</span>
<span size='small'>" + _"Your ranged attack always strikes first when defending." + "</span>
<span size='small'>" + _"skill_points^Cost: 4" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].firststrike_ranged not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 4}
		[then]
			{VARIABLE character[$side_number].firststrike_ranged yes}
			{VARIABLE_OP character[$side_number].character_points add -4}
			{BOB_ADD_WEAPON_SPECIAL ranged $character[$side_number].ranged_weapon FIRSTSTRIKE}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Backstab
#####################

[option]
message= "&$character[$side_number].melee_weapon_icon=<span color='{BOB_GREEN}'>" + _"Backstab" + "</span>
<span size='small'>" + _"Doubles melee damage if an ally is behind the target." + "</span>
<span size='small'>" + _"skill_points^Cost: 6" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].backstab_melee not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 6}
		[then]
			{VARIABLE character[$side_number].backstab_melee yes}
			{VARIABLE_OP character[$side_number].character_points add -6}
			{BOB_ADD_WEAPON_SPECIAL melee $character[$side_number].melee_weapon BACKSTAB}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Surprise
#####################

[option]
message= "&$character[$side_number].melee_weapon_icon=<span color='{BOB_GREEN}'>" + _"Surprise" + "</span>
<span size='small'>" + _"When an enemy moves next to you, it is automatically hit with a melee strike." + "</span>
<span size='small'>" + _"skill_points^Cost: 8" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 4}
	{BOB_CONDITION character[$side_number].surprise_melee not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 8}
		[then]
			{VARIABLE character[$side_number].surprise_melee yes}
			{VARIABLE_OP character[$side_number].character_points add -8}
			{BOB_ADD_WEAPON_SPECIAL melee $character[$side_number].melee_weapon SURPRISE}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]


####################################################################################
# Combat Stances
####################################################################################

[option]
message= "&icons/blank-icon.png=<span color='{BOB_GREEN}'>" + _"COMBAT STANCES" + "</span>"
[show_if]
	[not]
		{BOB_CONDITION character[$side_number].stance_attack equals yes}
		{BOB_CONDITION character[$side_number].stance_blitz equals yes}
		{BOB_CONDITION character[$side_number].stance_defend equals yes}
		{BOB_CONDITION character[$side_number].stance_aim equals yes}
		{BOB_CONDITION character[$side_number].stance_quickfire equals yes}
		{BOB_CONDITION character[$side_number].stance_dodge equals yes}
		{BOB_CONDITION character[$side_number].stance_run equals yes}
	[/not]
[/show_if]
[command]
[/command]
[/option]

#####################
# Attack
#####################

[option]
message= "&icons/stances/attack-icon.png=<span color='{BOB_GREEN}'>" + _"stance^Attack" + "</span>
<span size='small'>" + _"Allows you to adopt the attack stance." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].stance_attack not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].stance_attack yes}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Blitz
#####################

[option]
message= "&icons/stances/blitz-icon.png=<span color='{BOB_GREEN}'>" + _"stance^Blitz" + "</span>
<span size='small'>" + _"Allows you to adopt the blitz stance." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].stance_blitz not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].stance_blitz yes}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Defend
#####################

[option]
message= "&icons/stances/defend-icon.png=<span color='{BOB_GREEN}'>" + _"stance^Defend" + "</span>
<span size='small'>" + _"Allows you to adopt the defend stance." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].warrior_level greater_than_equal_to 4}
	{BOB_CONDITION character[$side_number].stance_defend not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].stance_defend yes}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Aim
#####################

[option]
message= "&icons/stances/aim-icon.png=<span color='{BOB_GREEN}'>" + _"stance^Aim" + "</span>
<span size='small'>" + _"Allows you to adopt the aim stance." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].stance_aim not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].stance_aim yes}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Quickfire
#####################

[option]
message= "&icons/stances/quickfire-icon.png=<span color='{BOB_GREEN}'>" + _"stance^Quickfire" + "</span>
<span size='small'>" + _"Allows you to adopt the quickfire stance." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].ranger_level greater_than_equal_to 3}
	{BOB_CONDITION character[$side_number].stance_quickfire not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].stance_quickfire yes}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Dodge
#####################

[option]
message= "&icons/stances/dodge-icon.png=<span color='{BOB_GREEN}'>" + _"stance^Dodge" + "</span>
<span size='small'>" + _"Allows you to adopt the dodge stance." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].vagabond_level greater_than_equal_to 2}
	{BOB_CONDITION character[$side_number].stance_dodge not_equals yes}
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].stance_dodge yes}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

#####################
# Run
#####################

[option]
message= "&icons/stances/run-icon.png=<span color='{BOB_GREEN}'>" + _"stance^Run" + "</span>
<span size='small'>" + _"Allows you to adopt the run stance." + "</span>
<span size='small'>" + _"skill_points^Cost: 3" + "</span>"
[show_if]
	{BOB_CONDITION character[$side_number].stance_run not_equals yes}
	#{BOB_CONDITION character[$side_number].defect not_equals clubfoot}
	[have_unit]
		canrecruit=yes
		x,y=$x1,$y1
		[not]
			[filter_wml]
				[modifications]
					[trait]
						id=clubfoot
					[/trait]
				[/modifications]
			[/filter_wml]
		[/not]
	[/have_unit]
[/show_if]
[command]
	[if]
		{BOB_CONDITION character[$side_number].character_points greater_than_equal_to 3}
		[then]
			{VARIABLE character[$side_number].stance_run yes}
			{VARIABLE_OP character[$side_number].character_points add -3}
			{BOB_REDRAW}
		[/then]
	[/if]
[/command]
[/option]

[/message]
[/do]
[/while]
#enddef
